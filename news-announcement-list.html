<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>资讯/公告列表 - HIECO 光合技术支持平台</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- 图标库 -->
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
  <style>
    body {
      background: #FFFFFF;
    }
    .glass-card {
      background: rgba(255, 255, 255, 0.85);
      backdrop-filter: blur(14px);
      border: 1px solid #e5e7eb;
    }
    .no-scrollbar::-webkit-scrollbar { display: none; }
    .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

    .filter-chip-active {
      border-color: #B01F24;
      color: #B01F24;
      background: rgba(255, 255, 255, 0.9);
    }
  </style>
</head>
<body class="bg-white text-gray-800">

<!-- 顶部导航（完整版），与首页风格统一 -->
<header class="fixed top-0 inset-x-0 z-50 bg-white backdrop-blur-xl border-b border-gray-300">
  <div class="max-w-7xl mx-auto px-4 lg:px-6">
    <div class="flex items-center justify-between h-14">
      <!-- LOGO + 品牌 -->
      <div class="flex items-center space-x-2">
        <a href="index.html" class="cursor-pointer hover:opacity-80 transition-opacity duration-200">
          <img src="images/logo2.png" alt="HIECO Logo" class="h-32 w-32 object-contain">
        </a>
        <div>
          <a href="index.html" class="cursor-pointer hover:opacity-80 transition-opacity duration-200">
            <div class="text-sm font-semibold text-[#2D874B] hover:text-[#256e3d] transition-colors duration-200">光合技术支持平台</div>
          </a>
        </div>
      </div>

      <!-- 导航入口（桌面端） -->
      <nav class="hidden md:flex items-center space-x-3 text-sm">
        <!-- 专家 - 无下拉 -->
        <a href="expert-center.html" class="px-3 py-1.5 rounded-full hover:bg-gray-300 transition text-gray-800">
          专家
        </a>

        <!-- 培训 - 带下拉浮窗（合并培训、考试、认证、讲师） -->
        <div class="nav-dropdown relative group">
          <span class="px-3 py-1.5 rounded-full hover:bg-gray-300 transition text-gray-800 flex items-center gap-1 cursor-pointer">
            培训
            <i class="fa fa-chevron-down text-xs text-gray-500"></i>
          </span>
          <div class="nav-dropdown-menu absolute top-full left-0 mt-2 w-96 bg-white rounded-2xl shadow-xl border border-gray-200 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 z-50">
            <div class="p-4">
              <div class="grid grid-cols-2 gap-4">
                <!-- 左侧：二级菜单 -->
                <div class="space-y-3">
                  <!-- 课程（原培训） -->
                  <div class="nav-item group/item relative">
                    <a href="course-list2.html" class="text-sm font-medium text-gray-800 hover:text-[#2D874B] flex items-center justify-between">
                      课程
                      <i class="fa fa-chevron-right text-xs opacity-0 group-hover/item:opacity-100"></i>
                    </a>
                    <div class="nav-submenu absolute left-full top-0 ml-2 w-80 bg-white rounded-xl shadow-lg border border-gray-200 opacity-0 invisible group-hover/item:opacity-100 group-hover/item:visible transition-all duration-300 z-50">
                      <div class="p-3">
                        <h4 class="text-sm font-semibold text-gray-800 mb-2">课程分类</h4>
                        <div class="grid grid-cols-2 gap-2">
                          <a href="#" class="text-xs text-gray-600 hover:text-[#2D874B] py-1">云基础设施</a>
                          <a href="#" class="text-xs text-gray-600 hover:text-[#2D874B] py-1">AI与数据智能</a>
                          <a href="#" class="text-xs text-gray-600 hover:text-[#2D874B] py-1">解决方案</a>
                          <a href="#" class="text-xs text-gray-600 hover:text-[#2D874B] py-1">安全技术</a>
                          <a href="#" class="text-xs text-gray-600 hover:text-[#2D874B] py-1">运维管理</a>
                          <a href="#" class="text-xs text-gray-600 hover:text-[#2D874B] py-1">开发技术</a>
                        </div>
                      </div>
                    </div>
                  </div>
                  
                  <!-- 考试 -->
                  <div class="nav-item group/item relative">
                    <a href="exam-list.html" class="text-sm font-medium text-gray-800 hover:text-[#2D874B] flex items-center justify-between">
                      考试
                      <i class="fa fa-chevron-right text-xs opacity-0 group-hover/item:opacity-100"></i>
                    </a>
                    <div class="nav-submenu absolute left-full top-0 ml-2 w-80 bg-white rounded-xl shadow-lg border border-gray-200 opacity-0 invisible group-hover/item:opacity-100 group-hover/item:visible transition-all duration-300 z-50">
                      <div class="p-3">
                        <h4 class="text-sm font-semibold text-gray-800 mb-2">考试分类</h4>
                        <div class="grid grid-cols-2 gap-2">
                          <a href="#" class="text-xs text-gray-600 hover:text-[#2D874B] py-1">资格认证考试</a>
                          <a href="#" class="text-xs text-gray-600 hover:text-[#2D874B] py-1">技能水平考试</a>
                          <a href="#" class="text-xs text-gray-600 hover:text-[#2D874B] py-1">岗位能力考试</a>
                          <a href="#" class="text-xs text-gray-600 hover:text-[#2D874B] py-1">产品认证考试</a>
                          <a href="#" class="text-xs text-gray-600 hover:text-[#2D874B] py-1">在线考试</a>
                          <a href="#" class="text-xs text-gray-600 hover:text-[#2D874B] py-1">线下考试</a>
                        </div>
                      </div>
                    </div>
                  </div>
                  
                  <!-- 认证 -->
                  <div class="nav-item group/item relative">
                    <a href="certification.html" class="text-sm font-medium text-gray-800 hover:text-[#2D874B] flex items-center justify-between">
                      认证
                      <i class="fa fa-chevron-right text-xs opacity-0 group-hover/item:opacity-100"></i>
                    </a>
                    <div class="nav-submenu absolute left-full top-0 ml-2 w-80 bg-white rounded-xl shadow-lg border border-gray-200 opacity-0 invisible group-hover/item:opacity-100 group-hover/item:visible transition-all duration-300 z-50">
                      <div class="p-3">
                        <h4 class="text-sm font-semibold text-gray-800 mb-2">认证分类</h4>
                        <div class="grid grid-cols-2 gap-2">
                          <a href="#" class="text-xs text-gray-600 hover:text-[#2D874B] py-1">通用计算认证</a>
                          <a href="#" class="text-xs text-gray-600 hover:text-[#2D874B] py-1">智能计算认证</a>
                          <a href="#" class="text-xs text-gray-600 hover:text-[#2D874B] py-1">行业解决方案认证</a>
                          <a href="#" class="text-xs text-gray-600 hover:text-[#2D874B] py-1">专业技术认证</a>
                          <a href="#" class="text-xs text-gray-600 hover:text-[#2D874B] py-1">初级认证</a>
                          <a href="#" class="text-xs text-gray-600 hover:text-[#2D874B] py-1">高级认证</a>
                        </div>
                      </div>
                    </div>
                  </div>
                  
                  <!-- 讲师 -->
                  <a href="lecturer-list.html" class="text-sm font-medium text-gray-800 hover:text-[#2D874B] block">
                    讲师
                  </a>
                </div>
                
                <!-- 右侧：快速入口 -->
                <div class="space-y-3">
                  <h3 class="text-sm font-semibold text-gray-800 mb-2">快速入口</h3>
                  <div class="space-y-2">
                    <a href="personal-center.html" class="text-xs text-gray-600 hover:text-[#2D874B] block py-1 flex items-center gap-2">
                      <i class="fa fa-user text-[#2D874B] text-xs"></i>
                      个人中心
                    </a>
                    <a href="task-detail.html" class="text-xs text-gray-600 hover:text-[#2D874B] block py-1 flex items-center gap-2">
                      <i class="fa fa-tasks text-[#2D874B] text-xs"></i>
                      我的任务
                    </a>
                    <a href="course-learning.html" class="text-xs text-gray-600 hover:text-[#2D874B] block py-1 flex items-center gap-2">
                      <i class="fa fa-book text-[#2D874B] text-xs"></i>
                      继续学习
                    </a>
                    <a href="certification.html" class="text-xs text-gray-600 hover:text-[#2D874B] block py-1 flex items-center gap-2">
                      <i class="fa fa-certificate text-[#2D874B] text-xs"></i>
                      我的证书
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- 直播 - 带下拉浮窗 -->
        <div class="nav-dropdown relative group">
          <a href="live-list.html" class="px-3 py-1.5 rounded-full hover:bg-gray-300 transition text-gray-800 flex items-center gap-1">
            直播
            <i class="fa fa-chevron-down text-xs text-gray-500"></i>
          </a>
          <div class="nav-dropdown-menu absolute top-full left-0 mt-2 w-80 bg-white rounded-2xl shadow-xl border border-gray-200 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 z-50">
            <div class="p-4">
              <div class="grid grid-cols-2 gap-4">
                <div class="space-y-2">
                  <h3 class="text-sm font-semibold text-gray-800 mb-2">直播状态</h3>
                  <div class="space-y-1">
                    <a href="#" class="text-xs text-gray-600 hover:text-[#2D874B] block py-1">未开始</a>
                    <a href="#" class="text-xs text-gray-600 hover:text-[#2D874B] block py-1">直播中</a>
                    <a href="#" class="text-xs text-gray-600 hover:text-[#2D874B] block py-1">已结束</a>
                    <a href="#" class="text-xs text-gray-600 hover:text-[#2D874B] block py-1">可预约</a>
                  </div>
                </div>
                <div class="space-y-2">
                  <h3 class="text-sm font-semibold text-gray-800 mb-2">直播类型</h3>
                  <div class="space-y-1">
                    <a href="#" class="text-xs text-gray-600 hover:text-[#2D874B] block py-1">技术分享</a>
                    <a href="#" class="text-xs text-gray-600 hover:text-[#2D874B] block py-1">产品发布</a>
                    <a href="#" class="text-xs text-gray-600 hover:text-[#2D874B] block py-1">案例解析</a>
                    <a href="#" class="text-xs text-gray-600 hover:text-[#2D874B] block py-1">专家访谈</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- 其他导航项（无下拉） -->
        <a href="#" class="px-3 py-1.5 rounded-full hover:bg-gray-300 transition text-gray-800">论坛</a>
        <a href="resource-center.html" class="px-3 py-1.5 rounded-full hover:bg-gray-300 transition text-gray-800">资源</a>
        
        <!-- 资讯 - 带下拉浮窗（合并资讯、活动） -->
        <div class="nav-dropdown relative group">
          <span class="px-3 py-1.5 rounded-full bg-[#2D874B] text-white transition flex items-center gap-1 cursor-pointer">
            资讯
            <i class="fa fa-chevron-down text-xs text-white"></i>
          </span>
          <div class="nav-dropdown-menu absolute top-full left-0 mt-2 w-64 bg-white rounded-2xl shadow-xl border border-gray-200 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 z-50">
            <div class="p-4">
              <div class="space-y-3">
                <!-- 资讯 -->
                <a href="news-announcement-list.html" class="flex items-center px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg transition">
                  <i class="fa fa-newspaper mr-3 text-[#2D874B]"></i>
                  <span>资讯</span>
                </a>
                
                <!-- 活动 -->
                <a href="activity-list.html" class="flex items-center px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg transition">
                  <i class="fa fa-calendar-alt mr-3 text-[#2D874B]"></i>
                  <span>活动</span>
                </a>
              </div>
            </div>
          </div>
        </div>
      </nav>

      <!-- 右侧功能区 -->
      <div class="flex items-center space-x-3">
        <!-- 搜索图标（桌面端） -->
        <div class="relative">
          <!-- 搜索图标按钮 -->
          <button id="search-toggle" class="h-9 w-9 rounded-full bg-gray-200/80 hover:bg-gray-300 transition flex items-center justify-center text-gray-600">
            <i class="fa fa-search text-sm"></i>
          </button>
        </div>
        
        <!-- 头像 -->
        <div class="relative">
          <button class="h-9 w-9 rounded-full bg-gray-200/80 hover:bg-gray-300 transition flex items-center justify-center text-gray-600">
            <i class="fa fa-user text-sm"></i>
          </button>
        </div>
      </div>
    </div>
  </div>
</header>

<main class="pt-16 lg:pt-20 pb-10">
  <section class="max-w-7xl mx-auto px-4 lg:px-6">

    <!-- 顶部说明 + 搜索 -->
    <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-3 mb-6">
      <div>
        <h2 class="text-lg font-semibold flex items-center gap-2">
          <span class="inline-flex h-6 w-1 rounded-full bg-indigo-500"></span>
          资讯 / 公告列表
        </h2>

      </div>

      <div class="flex flex-wrap items-center gap-2 justify-end">
        <!-- 搜索 -->
        <div class="relative">
          <i class="fa fa-search text-gray-400 absolute left-2 top-2.5 text-xs"></i>
          <input id="search-input"
                 type="text"
                 placeholder="搜索标题 / 来源 / 关键词"
                 class="w-52 md:w-64 rounded-full bg-white border border-gray-300 pl-7 pr-3 py-1.5 text-xs placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-[#B01F24] focus:border-[#B01F24]" />
        </div>
      </div>
    </div>

    <!-- 顶部筛选：类型 + 分类 -->
    <section class="mb-6 glass-card rounded-3xl border border-gray-300 p-4">
      <!-- 类型：全部 / 资讯 / 公告 -->
      <div class="flex flex-wrap items-center gap-2 text-xs mb-2">
        <span class="text-gray-400">类型：</span>
        <button id="type-all"
                class="filter-chip px-3 py-1 rounded-full bg-white border border-gray-300 text-[11px] text-gray-400 hover:border-[#B01F24]"
                data-type="all">
          全部
        </button>
        <button id="type-news"
                class="filter-chip px-3 py-1 rounded-full bg-white border border-gray-300 text-[11px] text-[#2D874B] hover:border-[#2D874B]"
                data-type="news">
          仅看资讯
        </button>
        <button id="type-announcement"
                class="filter-chip px-3 py-1 rounded-full bg-white border border-gray-300 text-[11px] text-[#B01F24] hover:border-[#B01F24]"
                data-type="announcement">
          仅看公告
        </button>
      </div>

      <!-- 资讯分类：行业动态 / 政策流程 / 平台新闻 -->
      <div id="category-filter" class="flex flex-wrap items-center gap-2 mt-1 text-xs hidden">
        <span class="text-gray-400">资讯分类：</span>
        <button class="filter-chip px-2.5 py-1 rounded-full bg-white border border-gray-300 text-[11px]"
                data-category="all">
          全部
        </button>
        <button class="filter-chip px-2.5 py-1 rounded-full bg-white border border-gray-300 text-[11px] text-[#B01F24]"
                data-category="certification">
          认证专题
        </button>
        <button class="filter-chip px-2.5 py-1 rounded-full bg-white border border-gray-300 text-[11px] text-[#B01F24]"
                data-category="industry">
          行业动态
        </button>
        <button class="filter-chip px-2.5 py-1 rounded-full bg-white border border-gray-300 text-[11px] text-[#B01F24]"
                data-category="policy">
          政策流程
        </button>
        <button class="filter-chip px-2.5 py-1 rounded-full bg-white border border-gray-300 text-[11px] text-[#B01F24]"
                data-category="platform">
          平台新闻
        </button>
      </div>

      <!-- 排序（按时间） -->
      <div class="mt-3 flex items-center justify-between text-[11px] text-gray-400">
        <div id="active-filter-text">当前视图：按时间倒序 · 全部类型</div>
        <div class="flex items-center gap-1">
          <span>排序：</span>
          <select id="sort-select"
                  class="rounded-full bg-white border border-gray-300 px-2 py-1 text-[11px] focus:outline-none focus:ring-1 focus:ring-[#B01F24]">
            <option value="time-desc">按时间从新到旧</option>
            <option value="read-desc">按阅读量从高到低</option>
          </select>
        </div>
      </div>
    </section>

    <!-- 列表 + 分页 -->
    <section>
      <!-- 列表 -->
      <div id="list-container"
           class="flex flex-col gap-3 mb-6">
        <!-- JS 渲染卡片 -->
      </div>

      <!-- 分页 -->
      <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 text-xs text-gray-400 gap-2">
        <div>
          共 <span id="total-count">0</span> 条，当前显示
          <span id="current-range">0–0</span>
        </div>
        <div class="flex items-center gap-2">
          <button id="prev-btn"
                  class="px-2.5 py-1 rounded-full bg-white border border-gray-300 hover:bg-gray-50">
            上一页
          </button>
          <span id="page-info">1 / 1</span>
          <button id="next-btn"
                  class="px-2.5 py-1 rounded-full bg-white border border-gray-300 hover:bg-gray-50">
            下一页
          </button>
        </div>
      </div>
    </section>
  </section>
</main>

<footer class="border-t border-gray-300 mt-8 pt-4 pb-6">
  <div class="max-w-7xl mx-auto px-4 lg:px-6 text-[11px] text-gray-500 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2">
    <div>© 2026 HIECO 光合技术支持平台 · 资讯中心</div>
    <div class="flex flex-wrap gap-3">
      <span>隐私政策</span>
      <span>法律声明</span>
      <span>版权信息</span>
    </div>
  </div>
</footer>

<!-- 交互脚本：筛选 / 排序 / 分页 / 渲染 -->
<script>
  // ====== 示例数据（实际使用时换成接口返回） ======
  const articles = [
    // 资讯
    { id: 1, type: 'news', category: 'industry', title: '云原生架构设计最佳实践与行业动态', source: '云基础设施学院', date: '2026-01-15 09:30', readCount: 1845 },
    { id: 2, type: 'news', category: 'certification', title: '2026 年认证体系升级与考试指南', source: '认证中心', date: '2026-01-14 16:30', readCount: 2150 },
    { id: 3, type: 'news', category: 'policy', title: '2026 年云原生安全政策调整解读', source: '云安全中心', date: '2026-01-14 14:20', readCount: 1230 },
    { id: 4, type: 'news', category: 'platform', title: 'HIECO 光合技术支持平台 2.0 正式上线', source: '平台开发团队', date: '2026-01-13 16:10', readCount: 1987 },
    { id: 5, type: 'news', category: 'certification', title: '认证专家访谈：如何高效备考专业认证', source: '认证中心', date: '2026-01-12 14:00', readCount: 1680 },
    { id: 6, type: 'news', category: 'industry', title: 'AI 与数据智能生态合作新趋势', source: 'AI 与数据智能学院', date: '2026-01-12 10:45', readCount: 1560 },
    { id: 7, type: 'news', category: 'platform', title: '新增「直播中心」与「活动中心」能力说明', source: '平台运营团队', date: '2025-12-30 09:15', readCount: 980 },

    // 公告
    { id: 8, type: 'announcement', category: 'none', title: '合作伙伴认证体系 2026 升级公告', source: '认证中心', date: '2026-01-10 09:00', readCount: 2560 },
    { id: 9, type: 'announcement', category: 'none', title: '2026 Q1 考试预约与重认证规则更新', source: '认证中心', date: '2026-01-09 11:30', readCount: 1890 },
    { id: 10, type: 'announcement', category: 'none', title: '关于平台计划维护的服务中断通知', source: '运维中心', date: '2025-12-28 15:10', readCount: 1400 },
    { id: 11, type: 'announcement', category: 'none', title: '隐私政策与用户协议更新说明', source: '法务与合规部', date: '2025-12-20 17:00', readCount: 1100 }
  ];

  const pageSize = 8;
  let currentPage = 1;
  let filteredArticles = [...articles];

  const filters = {
    type: 'all',       // all / news / announcement
    category: 'all',   // all / industry / policy / platform
    search: '',
    sort: 'time-desc'  // time-desc / read-desc
  };

  // DOM 引用
  const searchInput = document.getElementById('search-input');
  const listContainer = document.getElementById('list-container');
  const totalCountEl = document.getElementById('total-count');
  const currentRangeEl = document.getElementById('current-range');
  const pageInfoEl = document.getElementById('page-info');
  const prevBtn = document.getElementById('prev-btn');
  const nextBtn = document.getElementById('next-btn');

  const typeAllBtn = document.getElementById('type-all');
  const typeNewsBtn = document.getElementById('type-news');
  const typeAnnouncementBtn = document.getElementById('type-announcement');
  const categoryFilter = document.getElementById('category-filter');
  const categoryChips = categoryFilter.querySelectorAll('.filter-chip');
  const sortSelect = document.getElementById('sort-select');
  const activeFilterText = document.getElementById('active-filter-text');

  // ========== 工具函数 ==========
  function updateTypeButtonClass(btn, active) {
    if (active) {
      btn.classList.add('filter-chip-active');
    } else {
      btn.classList.remove('filter-chip-active');
    }
  }

  function updateCategoryDisplay() {
    if (filters.type === 'news') {
      categoryFilter.classList.remove('hidden');
    } else {
      categoryFilter.classList.add('hidden');
    }
  }

  function updateActiveFilterText() {
    const parts = [];
    if (filters.type === 'news') parts.push('仅看资讯');
    else if (filters.type === 'announcement') parts.push('仅看公告');
    else parts.push('全部类型');

    if (filters.type === 'news' && filters.category !== 'all') {
      const map = { industry: '行业动态', policy: '政策流程', platform: '平台新闻', certification: '认证专题' };
      parts.push('分类：' + (map[filters.category] || '全部'));
    }

    if (filters.sort === 'time-desc') {
      parts.push('按时间倒序');
    } else {
      parts.push('按阅读量倒序');
    }

    activeFilterText.textContent = '当前视图：' + parts.join(' · ');
  }

  // ========== 事件绑定 ==========
  // 类型切换
  typeAllBtn.addEventListener('click', () => {
    filters.type = 'all';
    updateTypeButtonClass(typeAllBtn, true);
    updateTypeButtonClass(typeNewsBtn, false);
    updateTypeButtonClass(typeAnnouncementBtn, false);
    updateCategoryDisplay();
    applyFiltersAndRender();
  });

  typeNewsBtn.addEventListener('click', () => {
    filters.type = 'news';
    updateTypeButtonClass(typeAllBtn, false);
    updateTypeButtonClass(typeNewsBtn, true);
    updateTypeButtonClass(typeAnnouncementBtn, false);
    updateCategoryDisplay();
    applyFiltersAndRender();
  });

  typeAnnouncementBtn.addEventListener('click', () => {
    filters.type = 'announcement';
    updateTypeButtonClass(typeAllBtn, false);
    updateTypeButtonClass(typeNewsBtn, false);
    updateTypeButtonClass(typeAnnouncementBtn, true);
    updateCategoryDisplay();
    applyFiltersAndRender();
  });

  // 分类切换
  categoryChips.forEach(chip => {
    chip.addEventListener('click', () => {
      const cat = chip.dataset.category;
      categoryChips.forEach(c => c.classList.remove('filter-chip-active'));
      chip.classList.add('filter-chip-active');
      filters.category = cat;
      applyFiltersAndRender();
    });
  });

  // 搜索
  searchInput.addEventListener('input', () => {
    filters.search = searchInput.value.trim().toLowerCase();
    applyFiltersAndRender();
  });

  // 排序
  sortSelect.addEventListener('change', () => {
    filters.sort = sortSelect.value;
    applyFiltersAndRender();
  });

  // 分页
  prevBtn.addEventListener('click', () => {
    if (currentPage > 1) {
      currentPage--;
      renderList();
    }
  });

  nextBtn.addEventListener('click', () => {
    const totalPages = Math.ceil(filteredArticles.length / pageSize) || 1;
    if (currentPage < totalPages) {
      currentPage++;
      renderList();
    }
  });

  // ========== 筛选 + 排序 =============
  function applyFiltersAndRender() {
    filteredArticles = articles.filter(a => {
      const matchType = filters.type === 'all' || a.type === filters.type;
      const matchCategory =
        filters.type === 'news'
          ? (filters.category === 'all' || a.category === filters.category)
          : true;

      const kw = filters.search;
      const matchSearch = !kw ||
        a.title.toLowerCase().includes(kw) ||
        a.source.toLowerCase().includes(kw);

      return matchType && matchCategory && matchSearch;
    });

    // 排序
    if (filters.sort === 'time-desc') {
      filteredArticles.sort((a, b) => new Date(b.date) - new Date(a.date));
    } else {
      filteredArticles.sort((a, b) => b.readCount - a.readCount);
    }

    currentPage = 1;
    updateActiveFilterText();
    renderList();
  }

  // ========== 渲染列表 ==========
  function renderList() {
    listContainer.innerHTML = '';
    const total = filteredArticles.length;
    const totalPages = Math.ceil(total / pageSize) || 1;
    const startIndex = (currentPage - 1) * pageSize;
    const endIndex = Math.min(startIndex + pageSize, total);

    const pageData = filteredArticles.slice(startIndex, endIndex);

    pageData.forEach(article => {
      const card = document.createElement('article');
      card.className = 'glass-card rounded-xl border border-gray-300 p-4 hover:border-[#B01F24]/80 transition cursor-pointer flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3';

      // 类型标签
      const typeTag = article.type === 'news'
        ? '<span class="inline-flex items-center px-2 py-0.5 rounded-full bg-[#2D874B]/10 text-[#2D874B] border border-[#2D874B]/60 text-[10px]"><i class="fa fa-newspaper mr-1 text-[9px]"></i>资讯</span>'
        : '<span class="inline-flex items-center px-2 py-0.5 rounded-full bg-[#B01F24]/10 text-[#B01F24] border border-[#B01F24]/60 text-[10px]"><i class="fa fa-bullhorn mr-1 text-[9px]"></i>公告</span>';

      // 分类标签（仅资讯）
      let categoryTag = '';
      if (article.type === 'news') {
        const cmap = {
          industry: { text: '行业动态', cls: 'text-[#2D874B]' },
          policy:   { text: '政策流程', cls: 'text-[#2D874B]' },
          platform: { text: '平台新闻', cls: 'text-[#2D874B]' },
          certification: { text: '认证专题', cls: 'text-[#2D874B]' }
        };
        const cfg = cmap[article.category];
        if (cfg) {
          categoryTag = `<span class="inline-flex items-center px-2 py-0.5 rounded-full bg-white border border-gray-300 text-[10px] ${cfg.cls}">${cfg.text}</span>`;
        }
      }

      const dateObj = new Date(article.date.replace(/-/g, '/'));
      const formattedDate = dateObj.toLocaleString('zh-CN', {
        year: 'numeric',
        month: '2-digit',
        day: '2-digit',
        hour: '2-digit',
        minute: '2-digit',
        hour12: false
      });

      card.innerHTML = `
        <div class="flex-1 min-w-0">
          <div class="flex items-center gap-2 mb-2">
            ${typeTag}
            ${categoryTag}
          </div>
          <h3 class="text-base font-semibold text-gray-800 mb-2">${article.title}</h3>
          <div class="flex flex-wrap items-center gap-4 text-xs text-gray-400">
            <span class="flex items-center gap-1">
              <i class="fa fa-building text-[10px] text-gray-300"></i>
              ${article.source}
            </span>
            <span class="flex items-center gap-1">
              <i class="fa fa-clock text-[10px] text-gray-300"></i>
              ${formattedDate}
            </span>
            <span class="flex items-center gap-1">
              <i class="fa fa-eye text-[10px] text-gray-300"></i>
              ${article.readCount}浏览
            </span>
          </div>
        </div>
        <div class="flex items-center">
          <span class="text-blue-500 flex items-center gap-1">
            查看详情
            <i class="fa fa-arrow-right text-[9px]"></i>
          </span>
        </div>
      `;

      // 点击整卡跳转详情页（示例路由，可按需替换）
      card.addEventListener('click', () => {
        const base = article.type === 'news' ? 'news-detail.html' : 'announcement-detail.html';
        window.location.href = `${base}?id=${article.id}`;
      });

      listContainer.appendChild(card);
    });

    totalCountEl.textContent = total;
    currentRangeEl.textContent = total ? `${startIndex + 1}–${endIndex}` : '0–0';
    pageInfoEl.textContent = `${currentPage} / ${totalPages}`;

    prevBtn.disabled = currentPage === 1;
    nextBtn.disabled = currentPage === totalPages;
    prevBtn.classList.toggle('opacity-50', prevBtn.disabled);
    nextBtn.classList.toggle('opacity-50', nextBtn.disabled);
  }

  // 初始化：默认激活「全部类型」「全部分类」
  updateTypeButtonClass(typeAllBtn, true);
  categoryChips.forEach(chip => {
    if (chip.dataset.category === 'all') chip.classList.add('filter-chip-active');
  });
  applyFiltersAndRender();
</script>

</body>
</html>