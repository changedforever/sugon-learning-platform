<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>直播列表 - HIECO 光合技术支持平台</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- 图标库 -->
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
  <style>
    body {
      background: #FFFFFF;
    }
    .glass-card {
      background: rgba(255, 255, 255, 0.85);
      backdrop-filter: blur(14px);
      border: 1px solid #e5e7eb;
    }
    .no-scrollbar::-webkit-scrollbar { display: none; }
    .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

    .filter-chip-active {
      border-color: #2D874B;
      color: #2D874B;
      background: rgba(255, 255, 255, 0.9);
    }
    .status-badge-upcoming {
      background: rgba(59, 130, 246, 0.1);
      color: #3b82f6;
      border-color: rgba(59, 130, 246, 0.3);
    }
    .status-badge-live {
      background: rgba(239, 68, 68, 0.1);
      color: #ef4444;
      border-color: rgba(239, 68, 68, 0.3);
    }
    .status-badge-ended {
      background: rgba(107, 114, 128, 0.1);
      color: #6b7280;
      border-color: rgba(107, 114, 128, 0.3);
    }
    .horizontal-scroll {
      display: flex;
      overflow-x: auto;
      overflow-y: hidden;
      gap: 1rem;
      padding-bottom: 0.5rem;
      scroll-behavior: smooth;
      /* 显示滚动条 */
      scrollbar-width: thin;
      scrollbar-color: #cbd5e1 transparent;
    }
    .horizontal-scroll::-webkit-scrollbar {
      height: 6px;
    }
    .horizontal-scroll::-webkit-scrollbar-track {
      background: #f1f5f9;
      border-radius: 3px;
    }
    .horizontal-scroll::-webkit-scrollbar-thumb {
      background: #cbd5e1;
      border-radius: 3px;
    }
    .horizontal-scroll::-webkit-scrollbar-thumb:hover {
      background: #94a3b8;
    }
    .horizontal-scroll > * {
      flex-shrink: 0;
      min-width: 280px;
      max-width: 280px;
    }
  </style>
</head>
<body class="bg-white text-gray-800">

<!-- 顶部导航（完整版），与首页风格统一 -->
<header class="fixed top-0 inset-x-0 z-50 bg-white backdrop-blur-xl border-b border-gray-300">
  <div class="max-w-7xl mx-auto px-4 lg:px-6">
    <div class="flex items-center justify-between h-14">
      <!-- LOGO + 品牌 -->
      <div class="flex items-center space-x-2">
        <a href="index.html" class="cursor-pointer hover:opacity-80 transition-opacity duration-200">
          <img src="images/logo2.png" alt="HIECO Logo" class="h-32 w-32 object-contain">
        </a>
        <div>
          <a href="index.html" class="cursor-pointer hover:opacity-80 transition-opacity duration-200">
            <div class="text-sm font-semibold text-[#2D874B] hover:text-[#256e3d] transition-colors duration-200">光合技术支持平台</div>
          </a>
        </div>
      </div>

      <!-- 导航入口（桌面端） -->
      <nav class="hidden md:flex items-center space-x-3 text-sm">
        <!-- 专家 - 无下拉 -->
        <a href="expert-center.html" class="px-3 py-1.5 rounded-full hover:bg-gray-300 transition text-gray-800">
          专家
        </a>

        <!-- 培训 - 带下拉浮窗（合并培训、考试、认证、讲师） -->
        <div class="nav-dropdown relative group">
          <span class="px-3 py-1.5 rounded-full hover:bg-gray-300 transition text-gray-800 flex items-center gap-1 cursor-pointer">
            培训
            <i class="fa fa-chevron-down text-xs text-gray-500"></i>
          </span>
          <div class="nav-dropdown-menu absolute top-full left-0 mt-2 w-96 bg-white rounded-2xl shadow-xl border border-gray-200 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 z-50">
            <div class="p-4">
              <div class="grid grid-cols-2 gap-4">
                <!-- 左侧：二级菜单 -->
                <div class="space-y-3">
                  <!-- 课程（原培训） -->
                  <div class="nav-item group/item relative">
                    <a href="course-list2.html" class="text-sm font-medium text-gray-800 hover:text-[#2D874B] flex items-center justify-between">
                      课程
                      <i class="fa fa-chevron-right text-xs opacity-0 group-hover/item:opacity-100"></i>
                    </a>
                    <div class="nav-submenu absolute left-full top-0 ml-2 w-80 bg-white rounded-xl shadow-lg border border-gray-200 opacity-0 invisible group-hover/item:opacity-100 group-hover/item:visible transition-all duration-300 z-50">
                      <div class="p-3">
                        <h4 class="text-sm font-semibold text-gray-800 mb-2">课程分类</h4>
                        <div class="grid grid-cols-2 gap-2">
                          <a href="#" class="text-xs text-gray-600 hover:text-[#2D874B] py-1">云基础设施</a>
                          <a href="#" class="text-xs text-gray-600 hover:text-[#2D874B] py-1">AI与数据智能</a>
                          <a href="#" class="text-xs text-gray-600 hover:text-[#2D874B] py-1">解决方案</a>
                          <a href="#" class="text-xs text-gray-600 hover:text-[#2D874B] py-1">安全技术</a>
                          <a href="#" class="text-xs text-gray-600 hover:text-[#2D874B] py-1">运维管理</a>
                          <a href="#" class="text-xs text-gray-600 hover:text-[#2D874B] py-1">开发技术</a>
                        </div>
                      </div>
                    </div>
                  </div>
                  
                  <!-- 考试 -->
                  <div class="nav-item group/item relative">
                    <a href="exam-list.html" class="text-sm font-medium text-gray-800 hover:text-[#2D874B] flex items-center justify-between">
                      考试
                      <i class="fa fa-chevron-right text-xs opacity-0 group-hover/item:opacity-100"></i>
                    </a>
                    <div class="nav-submenu absolute left-full top-0 ml-2 w-80 bg-white rounded-xl shadow-lg border border-gray-200 opacity-0 invisible group-hover/item:opacity-100 group-hover/item:visible transition-all duration-300 z-50">
                      <div class="p-3">
                        <h4 class="text-sm font-semibold text-gray-800 mb-2">考试分类</h4>
                        <div class="grid grid-cols-2 gap-2">
                          <a href="#" class="text-xs text-gray-600 hover:text-[#2D874B] py-1">资格认证考试</a>
                          <a href="#" class="text-xs text-gray-600 hover:text-[#2D874B] py-1">技能水平考试</a>
                          <a href="#" class="text-xs text-gray-600 hover:text-[#2D874B] py-1">岗位能力考试</a>
                          <a href="#" class="text-xs text-gray-600 hover:text-[#2D874B] py-1">产品认证考试</a>
                          <a href="#" class="text-xs text-gray-600 hover:text-[#2D874B] py-1">在线考试</a>
                          <a href="#" class="text-xs text-gray-600 hover:text-[#2D874B] py-1">线下考试</a>
                        </div>
                      </div>
                    </div>
                  </div>
                  
                  <!-- 认证 -->
                  <div class="nav-item group/item relative">
                    <a href="certification.html" class="text-sm font-medium text-gray-800 hover:text-[#2D874B] flex items-center justify-between">
                      认证
                      <i class="fa fa-chevron-right text-xs opacity-0 group-hover/item:opacity-100"></i>
                    </a>
                    <div class="nav-submenu absolute left-full top-0 ml-2 w-80 bg-white rounded-xl shadow-lg border border-gray-200 opacity-0 invisible group-hover/item:opacity-100 group-hover/item:visible transition-all duration-300 z-50">
                      <div class="p-3">
                        <h4 class="text-sm font-semibold text-gray-800 mb-2">认证分类</h4>
                        <div class="grid grid-cols-2 gap-2">
                          <a href="#" class="text-xs text-gray-600 hover:text-[#2D874B] py-1">通用计算认证</a>
                          <a href="#" class="text-xs text-gray-600 hover:text-[#2D874B] py-1">智能计算认证</a>
                          <a href="#" class="text-xs text-gray-600 hover:text-[#2D874B] py-1">行业解决方案认证</a>
                          <a href="#" class="text-xs text-gray-600 hover:text-[#2D874B] py-1">专业技术认证</a>
                          <a href="#" class="text-xs text-gray-600 hover:text-[#2D874B] py-1">初级认证</a>
                          <a href="#" class="text-xs text-gray-600 hover:text-[#2D874B] py-1">高级认证</a>
                        </div>
                      </div>
                    </div>
                  </div>
                  
                  <!-- 讲师 -->
                  <a href="lecturer-list.html" class="text-sm font-medium text-gray-800 hover:text-[#2D874B] block">
                    讲师
                  </a>
                </div>
                
                <!-- 右侧：快速入口 -->
                <div class="space-y-3">
                  <h3 class="text-sm font-semibold text-gray-800 mb-2">快速入口</h3>
                  <div class="space-y-2">
                    <a href="personal-center.html" class="text-xs text-gray-600 hover:text-[#2D874B] block py-1 flex items-center gap-2">
                      <i class="fa fa-user text-[#2D874B] text-xs"></i>
                      个人中心
                    </a>
                    <a href="task-detail.html" class="text-xs text-gray-600 hover:text-[#2D874B] block py-1 flex items-center gap-2">
                      <i class="fa fa-tasks text-[#2D874B] text-xs"></i>
                      我的任务
                    </a>
                    <a href="course-learning.html" class="text-xs text-gray-600 hover:text-[#2D874B] block py-1 flex items-center gap-2">
                      <i class="fa fa-book text-[#2D874B] text-xs"></i>
                      继续学习
                    </a>
                    <a href="certification.html" class="text-xs text-gray-600 hover:text-[#2D874B] block py-1 flex items-center gap-2">
                      <i class="fa fa-certificate text-[#2D874B] text-xs"></i>
                      我的证书
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- 直播 - 带下拉浮窗 -->
        <div class="nav-dropdown relative group">
          <a href="live-list.html" class="px-3 py-1.5 rounded-full bg-[#2D874B] text-white transition flex items-center gap-1">
            直播
            <i class="fa fa-chevron-down text-xs text-white"></i>
          </a>
          <div class="nav-dropdown-menu absolute top-full left-0 mt-2 w-80 bg-white rounded-2xl shadow-xl border border-gray-200 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 z-50">
            <div class="p-4">
              <div class="grid grid-cols-2 gap-4">
                <div class="space-y-2">
                  <h3 class="text-sm font-semibold text-gray-800 mb-2">直播状态</h3>
                  <div class="space-y-1">
                    <a href="#" class="text-xs text-gray-600 hover:text-[#2D874B] block py-1">未开始</a>
                    <a href="#" class="text-xs text-gray-600 hover:text-[#2D874B] block py-1">直播中</a>
                    <a href="#" class="text-xs text-gray-600 hover:text-[#2D874B] block py-1">已结束</a>
                    <a href="#" class="text-xs text-gray-600 hover:text-[#2D874B] block py-1">可预约</a>
                  </div>
                </div>
                <div class="space-y-2">
                  <h3 class="text-sm font-semibold text-gray-800 mb-2">直播类型</h3>
                  <div class="space-y-1">
                    <a href="#" class="text-xs text-gray-600 hover:text-[#2D874B] block py-1">技术分享</a>
                    <a href="#" class="text-xs text-gray-600 hover:text-[#2D874B] block py-1">产品发布</a>
                    <a href="#" class="text-xs text-gray-600 hover:text-[#2D874B] block py-1">案例解析</a>
                    <a href="#" class="text-xs text-gray-600 hover:text-[#2D874B] block py-1">专家访谈</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- 其他导航项（无下拉） -->
        <a href="https://forum.sourcefind.cn/" class="px-3 py-1.5 rounded-full hover:bg-gray-300 transition text-gray-800">论坛</a>
        <a href="resource-center.html" class="px-3 py-1.5 rounded-full hover:bg-gray-300 transition text-gray-800">资源</a>
        
        <!-- 资讯 - 带下拉浮窗（合并资讯、活动） -->
        <div class="nav-dropdown relative group">
          <span class="px-3 py-1.5 rounded-full hover:bg-gray-300 transition text-gray-800 flex items-center gap-1 cursor-pointer">
            资讯
            <i class="fa fa-chevron-down text-xs text-gray-500"></i>
          </span>
          <div class="nav-dropdown-menu absolute top-full left-0 mt-2 w-64 bg-white rounded-2xl shadow-xl border border-gray-200 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 z-50">
            <div class="p-4">
              <div class="space-y-3">
                <!-- 资讯 -->
                <a href="news-announcement-list.html" class="flex items-center px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg transition">
                  <i class="fa fa-newspaper mr-3 text-[#2D874B]"></i>
                  <span>资讯</span>
                </a>
                
                <!-- 活动 -->
                <a href="activity-list.html" class="flex items-center px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg transition">
                  <i class="fa fa-calendar-alt mr-3 text-[#2D874B]"></i>
                  <span>活动</span>
                </a>
              </div>
            </div>
          </div>
        </div>
      </nav>

      <!-- 右侧功能区 -->
      <div class="flex items-center space-x-3">
        <!-- 搜索图标（桌面端） -->
        <div class="relative">
          <!-- 搜索图标按钮 -->
          <button id="search-toggle" class="h-9 w-9 rounded-full bg-gray-200/80 hover:bg-gray-300 transition flex items-center justify-center text-gray-600">
            <i class="fa fa-search text-sm"></i>
          </button>
        </div>
        
        <!-- 头像 -->
        <div class="relative">
          <button class="h-9 w-9 rounded-full bg-gray-200/80 hover:bg-gray-300 transition flex items-center justify-center text-gray-600">
            <i class="fa fa-user text-sm"></i>
          </button>
        </div>
      </div>
    </div>
  </div>
</header>

<main class="pt-16 lg:pt-20 pb-10">
  <section class="max-w-7xl mx-auto px-4 lg:px-6">

    <!-- 顶部说明 -->
    <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-3 mb-6">
      <div>
        <h2 class="text-lg font-semibold flex items-center gap-2">
          <span class="inline-flex h-6 w-1 rounded-full bg-[#2D874B]"></span>
          直播列表
        </h2>

      </div>

    </div>

    <!-- 正在直播区域 -->
    <section class="mb-8">
      <h3 class="text-base font-semibold mb-4 flex items-center gap-2">
        <!-- <span class="inline-flex h-5 w-1 rounded-full bg-red-500"></span> -->
        正在直播
      </h3>
      <div class="flex flex-col lg:flex-row gap-4 pb-4">
        <!-- 左侧：主要直播卡片区域 -->
        <div id="live-now-list" class="lg:w-3/5 flex-grow">  <!-- 增大左侧卡片区域比例 -->
          <!-- JS 将在此处注入主要直播卡片 -->
        </div>
        <!-- 右侧：四个小卡片区域 -->
        <div class="lg:w-2/5 grid grid-cols-2 gap-4">
          <div class="glass-card rounded-3xl border border-gray-300 overflow-hidden hover:-translate-y-1 hover:border-[#2D874B]/80 transition cursor-pointer flex flex-col">
            <div class="relative flex-shrink-0">
              <div class="aspect-[590/412] bg-gray-200 flex items-center justify-center">  <!-- 调整宽高比以匹配左侧大卡片高度的一半 -->
                <span class="text-gray-500 text-sm">直播封面图</span>
              </div>
              <div class="absolute top-2 left-2">
                <span class="inline-flex items-center px-2 py-0.5 rounded-full border text-[10px] status-badge-live">
                  <i class="fa fa-broadcast-tower mr-1 text-[8px]"></i>直播中
                </span>
              </div>
              <div class="absolute top-2 right-2 bg-black bg-opacity-60 text-white text-[10px] rounded-lg px-2 py-1 flex items-center">
                <span><i class="fa fa-users mr-1"></i> 1.2k</span>
              </div>
              <!-- 右下角观看按钮 -->
              <div class="absolute bottom-2 right-2">
                <a href="#" class="px-2 py-1 rounded-full text-[10px] font-medium bg-[#2D874B] text-white hover:opacity-90">
                  观看
                </a>
              </div>
            </div>
            <div class="p-3">
              <h3 class="text-sm font-semibold line-clamp-1 mb-1">AI技术前沿分享</h3>
              <div class="text-xs text-gray-500">2024-01-28 14:00</div>
            </div>
          </div>
          <div class="glass-card rounded-3xl border border-gray-300 overflow-hidden hover:-translate-y-1 hover:border-[#2D874B]/80 transition cursor-pointer flex flex-col">
            <div class="relative flex-shrink-0">
              <div class="aspect-[590/412] bg-gray-200 flex items-center justify-center">  <!-- 调整宽高比以匹配左侧大卡片高度的一半 -->
                <span class="text-gray-500 text-sm">直播封面图</span>
              </div>
              <div class="absolute top-2 left-2">
                <span class="inline-flex items-center px-2 py-0.5 rounded-full border text-[10px] status-badge-live">
                  <i class="fa fa-broadcast-tower mr-1 text-[8px]"></i>直播中
                </span>
              </div>
              <div class="absolute top-2 right-2 bg-black bg-opacity-60 text-white text-[10px] rounded-lg px-2 py-1 flex items-center">
                <span><i class="fa fa-users mr-1"></i> 856</span>
              </div>
              <!-- 右下角观看按钮 -->
              <div class="absolute bottom-2 right-2">
                <a href="#" class="px-2 py-1 rounded-full text-[10px] font-medium bg-[#2D874B] text-white hover:opacity-90">
                  观看
                </a>
              </div>
            </div>
            <div class="p-3">
              <h3 class="text-sm font-semibold line-clamp-1 mb-1">云计算架构设计实战</h3>
              <div class="text-xs text-gray-500">2024-01-28 15:30</div>
            </div>
          </div>
          <div class="glass-card rounded-3xl border border-gray-300 overflow-hidden hover:-translate-y-1 hover:border-[#2D874B]/80 transition cursor-pointer flex flex-col">
            <div class="relative flex-shrink-0">
              <div class="aspect-[590/412] bg-gray-200 flex items-center justify-center">  <!-- 调整宽高比以匹配左侧大卡片高度的一半 -->
                <span class="text-gray-500 text-sm">直播封面图</span>
              </div>
              <div class="absolute top-2 left-2">
                <span class="inline-flex items-center px-2 py-0.5 rounded-full border text-[10px] status-badge-live">
                  <i class="fa fa-broadcast-tower mr-1 text-[8px]"></i>直播中
                </span>
              </div>
              <div class="absolute top-2 right-2 bg-black bg-opacity-60 text-white text-[10px] rounded-lg px-2 py-1 flex items-center">
                <span><i class="fa fa-users mr-1"></i> 2.1k</span>
              </div>
              <!-- 右下角观看按钮 -->
              <div class="absolute bottom-2 right-2">
                <a href="#" class="px-2 py-1 rounded-full text-[10px] font-medium bg-[#2D874B] text-white hover:opacity-90">
                  观看
                </a>
              </div>
            </div>
            <div class="p-3">
              <h3 class="text-sm font-semibold line-clamp-1 mb-1">大数据处理技术解析</h3>
              <div class="text-xs text-gray-500">2024-01-28 16:00</div>
            </div>
          </div>
          <div class="glass-card rounded-3xl border border-gray-300 overflow-hidden hover:-translate-y-1 hover:border-[#2D874B]/80 transition cursor-pointer flex flex-col">
            <div class="relative flex-shrink-0">
              <div class="aspect-[590/412] bg-gray-200 flex items-center justify-center">  <!-- 调整宽高比以匹配左侧大卡片高度的一半 -->
                <span class="text-gray-500 text-sm">直播封面图</span>
              </div>
              <div class="absolute top-2 left-2">
                <span class="inline-flex items-center px-2 py-0.5 rounded-full border text-[10px] status-badge-live">
                  <i class="fa fa-broadcast-tower mr-1 text-[8px]"></i>直播中
                </span>
              </div>
              <div class="absolute top-2 right-2 bg-black bg-opacity-60 text-white text-[10px] rounded-lg px-2 py-1 flex items-center">
                <span><i class="fa fa-users mr-1"></i> 543</span>
              </div>
              <!-- 右下角观看按钮 -->
              <div class="absolute bottom-2 right-2">
                <a href="#" class="px-2 py-1 rounded-full text-[10px] font-medium bg-[#2D874B] text-white hover:opacity-90">
                  观看
                </a>
              </div>
            </div>
            <div class="p-3">
              <h3 class="text-sm font-semibold line-clamp-1 mb-1">容器化部署最佳实践</h3>
              <div class="text-xs text-gray-500">2024-01-28 17:00</div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- 我的关注/我的预约区域 -->
    <section class="mb-8">
      <h3 class="text-base font-semibold mb-4 flex items-center gap-2">
        <!-- <span class="inline-flex h-5 w-1 rounded-full bg-[#B01F24]"></span> -->
        <span id="tab-follow" class="cursor-pointer mr-4 text-[#B01F24] transition-colors" style="border-bottom: 2px solid #B01F24;">我的关注</span>
        <span id="tab-booking" class="cursor-pointer text-gray-600 transition-colors" style="border-bottom: 2px solid transparent;">我的预约</span> 
      </h3>
      <!-- 我的关注列表 -->
      <div id="follow-list" class="horizontal-scroll">
        <!-- 由 JS 动态生成 -->
      </div>
      <!-- 我的预约列表 -->
      <div id="booking-list" class="horizontal-scroll hidden">
        <!-- 由 JS 动态生成 -->
      </div>
    </section>

    <!-- 即将直播区域 -->
    <section class="mb-8">
      <h3 class="text-base font-semibold mb-4 flex items-center gap-2">
        <!-- <span class="inline-flex h-5 w-1 rounded-full bg-blue-500"></span> -->
        即将直播
      </h3>
      <div class="flex flex-col lg:flex-row gap-4">
        <!-- 左侧：单一直播卡片 -->
        <div class="lg:w-1/3 flex">
          <div id="upcoming-main-card" class="flex justify-center flex-grow">
            <!-- 左侧主卡片将由JS注入 -->
          </div>
        </div>
        <!-- 右侧：日期列表 -->
        <div id="upcoming-date-list-container" class="hidden lg:block lg:w-2/3">
          <div class="flex h-full">
            <!-- 右侧日期列表的左侧：直播简介 -->
            <div id="upcoming-description" class="lg:w-1/2 glass-card rounded-3xl border border-gray-300 p-4 overflow-y-auto flex-grow">
              <!-- 直播简介将由JS注入 -->
            </div>
            <!-- 右侧日期列表的右侧：日期列表 -->
            <div id="upcoming-date-list" class="lg:w-1/2 glass-card rounded-3xl border border-gray-300 overflow-hidden flex flex-col">
              <!-- 右侧日期列表将由JS注入 -->
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- 多维筛选：类别、赛道 -->
    <section class="mb-6">
      <div class="glass-card rounded-3xl border border-gray-300 p-4">
        <div class="flex items-center justify-between">
          <div class="flex items-center gap-2">
            <!--i class="fa fa-filter text-indigo-400 text-sm"></i>
            <span class="text-sm font-medium">筛选条件</span-->
          </div>
          <span id="active-filter-text" class="text-[11px] text-gray-600">
            已选条件：全部
          </span>
        </div>

        <div class="flex flex-col md:flex-row gap-6 mt-3">
          <!-- 类别 -->
          <div class="flex-1">
            <div class="flex items-center flex-wrap gap-1">
              <span class="text-gray-600 mr-2 whitespace-nowrap">类别</span>
              <div class="flex flex-wrap gap-1">
                <button class="filter-chip px-2.5 py-1 rounded-full bg-white/80 border border-gray-300 text-[11px]"
                        data-filter="category" data-value="all">
                  全部
                </button>
                <button class="filter-chip px-2.5 py-1 rounded-full bg-white/80 border border-gray-300 text-[11px] text-indigo-600"
                        data-filter="category" data-value="云基础设施">
                  云基础设施
                </button>
                <button class="filter-chip px-2.5 py-1 rounded-full bg-white/80 border border-gray-300 text-[11px] text-[#B01F24]"
                        data-filter="category" data-value="AI与数据智能">
                  AI 与数据智能
                </button>
                <button class="filter-chip px-2.5 py-1 rounded-full bg-white/80 border border-gray-300 text-[11px] text-amber-600"
                        data-filter="category" data-value="解决方案">
                  解决方案
                </button>
              </div>
            </div>
          </div>

          <!-- 赛道 -->
          <div class="flex-1">
            <div class="flex items-center flex-wrap gap-1">
              <span class="text-gray-600 mr-2 whitespace-nowrap">赛道</span>
              <div class="flex flex-wrap gap-1">
                <button class="filter-chip px-2.5 py-1 rounded-full bg-white/80 border border-gray-300 text-[11px]"
                        data-filter="track" data-value="all">
                  全部
                </button>
                <button class="filter-chip px-2.5 py-1 rounded-full bg-white/80 border border-gray-300 text-[11px] text-[#B01F24]"
                        data-filter="track" data-value="DevOps">
                  DevOps
                </button>
                <button class="filter-chip px-2.5 py-1 rounded-full bg-white/80 border border-gray-300 text-[11px] text-purple-600"
                        data-filter="track" data-value="AI">
                  AI 赛道
                </button>
                <button class="filter-chip px-2.5 py-1 rounded-full bg-white/80 border border-gray-300 text-[11px] text-amber-600"
                        data-filter="track" data-value="业务运营">
                  业务运营
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- 全部直播区域 -->
    <section>
      <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4">
        <h3 class="text-base font-semibold flex items-center gap-2">
          <!-- <span class="inline-flex h-5 w-1 rounded-full bg-gray-500"></span> -->
          更多直播
        </h3>
        <div class="flex flex-wrap items-center gap-2 justify-end mt-2 sm:mt-0">
          <!-- 搜索框 -->
          <div class="relative">
            <i class="fa fa-search text-gray-400 absolute left-2 top-2.5 text-xs"></i>
            <input id="search-input"
                   type="text"
                   placeholder="搜索直播主题 / 发布方 / 标签"
                   class="w-52 md:w-64 rounded-full bg-white/80 border border-gray-300 pl-7 pr-3 py-1.5 text-xs placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-[#2D874B] focus:border-[#2D874B]" />
          </div>
          
          <!-- 排序 -->
          <div class="flex items-center gap-1 text-xs">
            <span class="text-gray-600">排序：</span>
            <select id="sort-select"
                    class="rounded-full bg-white/80 border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-1 focus:ring-[#2D874B]">
              <option value="newest">最新</option>
              <option value="most-popular">最热</option>
            </select>
          </div>
        </div>
      </div>
      <!-- 统计 + 分页信息 -->
      <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-3 text-[11px] text-gray-600 gap-2">
        <div>
          共 <span id="total-count">0</span> 场直播，当前显示
          <span id="current-range">0–0</span>
        </div>
        <div class="flex items-center gap-2">
          <button id="prev-btn"
                  class="px-2.5 py-1 rounded-full bg-white border border-gray-300 hover:bg-gray-50">
            上一页
          </button>
          <span id="page-info">1 / 1</span>
          <button id="next-btn"
                  class="px-2.5 py-1 rounded-full bg-white border border-gray-300 hover:bg-gray-50">
            下一页
          </button>
        </div>
      </div>

      <!-- 网格卡片 -->
      <div id="all-live-list"
           class="grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">
        <!-- 由 JS 注入 -->
      </div>
    </section>
  </section>
</main>

<!-- 底部 -->
<footer class="border-t border-gray-300 mt-8 pt-4 pb-6">
  <div class="max-w-7xl mx-auto px-4 lg:px-6 text-[11px] text-gray-600 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2">
    <div>© 2026 HIECO 光合技术支持平台 · 直播中心</div>
    <div class="flex flex-wrap gap-3">
      <span>隐私政策</span>
      <span>法律声明</span>
      <span>版权信息</span>
    </div>
  </div>
</footer>

<!-- 交互脚本：筛选 / 分页 / 预约 / 取消预约 -->
<script>
  // 模拟直播数据（实际可改为接口）
  const allLives = [
    { id: 1, title: "云原生架构设计实战分享", source: "云基础设施学院", date: "2026-01-27 19:00", status: "upcoming", category: "云基础设施", role: "云架构师", track: "DevOps", attendees: 1234, cover: "images/living_room.png" },
    { id: 2, title: "AI 与数据智能实战公开课", source: "AI 与数据智能学院", date: "2026-01-15 20:00", status: "live", category: "AI与数据智能", role: "数据分析师", track: "AI", attendees: 2567, cover: "images/living_room.png" },
    { id: 3, title: "解决方案与售前实战分享", source: "解决方案与售前学院", date: "2026-01-14 18:00", status: "ended", category: "解决方案", role: "解决方案顾问", track: "业务运营", attendees: 894, cover: "images/living_room.png" },
    { id: 4, title: "生态伙伴云运维沙龙", source: "云基础设施学院", date: "2026-01-29 19:30", status: "upcoming", category: "云基础设施", role: "运维工程师", track: "DevOps", attendees: 1562, cover: "images/living_room.png" },
    { id: 5, title: "金融行业云原生案例拆解", source: "解决方案与售前学院", date: "2026-01-11 20:00", status: "ended", category: "解决方案", role: "解决方案顾问", track: "业务运营", attendees: 180, cover: "images/living_room.png" },
    { id: 6, title: "AIGC 在方案中的落地", source: "AI 与数据智能学院", date: "2026-02-02 18:30", status: "upcoming", category: "AI与数据智能", role: "开发者", track: "AI", attendees: 987, cover: "images/living_room.png" },
    { id: 7, title: "伙伴技术沙龙：真实项目案例", source: "解决方案与售前学院", date: "2026-01-05 19:00", status: "ended", category: "解决方案", role: "销售", track: "业务运营", attendees: 543, cover: "images/living_room.png" },
    { id: 8, title: "云成本优化与 FinOps", source: "云基础设施学院", date: "2025-12-30 18:30", status: "ended", category: "云基础设施", role: "云架构师", track: "DevOps", attendees: 678, cover: "images/living_room.png" },
    { id: 9, title: "生态技术领袖闭门对话", source: "生态合作中心", date: "2025-12-25 20:00", status: "ended", category: "解决方案", role: "技术专家", track: "业务运营", attendees: 456, cover: "images/living_room.png" },
    { id: 10, title: "云原生安全最佳实践", source: "云基础设施学院", date: "2026-02-03 19:00", status: "upcoming", category: "云基础设施", role: "云安全专家", track: "DevOps", attendees: 1123, cover: "images/living_room.png" },
    { id: 11, title: "数据治理与合规专题直播", source: "AI 与数据智能学院", date: "2025-12-18 18:30", status: "ended", category: "AI与数据智能", role: "数据分析师", track: "AI", attendees: 342, cover: "images/living_room.png" },
    { id: 12, title: "销售技巧与标杆案例复盘", source: "解决方案与售前学院", date: "2025-12-15 20:00", status: "ended", category: "解决方案", role: "销售", track: "业务运营", attendees: 230, cover: "images/living_room.png" },
    { id: 13, title: "企业数字化转型实践分享", source: "解决方案与售前学院", date: "2025-12-10 19:00", status: "ended", category: "解决方案", role: "数字化转型顾问", track: "业务运营", attendees: 789, cover: "images/living_room.png" },
    { id: 14, title: "云原生安全技术研讨会", source: "云基础设施学院", date: "2025-12-05 18:30", status: "ended", category: "云基础设施", role: "安全专家", track: "DevOps", attendees: 567, cover: "images/living_room.png" },
    { id: 15, title: "人工智能前沿技术论坛", source: "AI 与数据智能学院", date: "2025-11-30 19:00", status: "ended", category: "AI与数据智能", role: "AI专家", track: "AI", attendees: 890, cover: "images/living_room.png" }
  ];

  const pageSize = 9;
  let currentPage = 1;
  let filteredLives = [...allLives];

  const filters = {
    category: 'all',
    track: 'all',
    search: ''
  };

  const searchInput = document.getElementById('search-input');
  const sortSelect = document.getElementById('sort-select');
  const liveNowList = document.getElementById('live-now-list');
  const upcomingList = document.getElementById('upcoming-list');
  const allLiveList = document.getElementById('all-live-list');
  const totalCountEl = document.getElementById('total-count');
  const currentRangeEl = document.getElementById('current-range');
  const pageInfoEl = document.getElementById('page-info');
  const prevBtn = document.getElementById('prev-btn');
  const nextBtn = document.getElementById('next-btn');
  const activeFilterText = document.getElementById('active-filter-text');
  const filterChips = document.querySelectorAll('.filter-chip');

  // 预约状态本地存储（可替换为后端状态）
  const ENROLL_KEY = 'live_enrolled_ids';
  let enrolledIds = new Set();
  try {
    const raw = localStorage.getItem(ENROLL_KEY);
    if (raw) {
      enrolledIds = new Set(JSON.parse(raw));
    } else {
      // 如果没有存储数据，初始化一些默认的预约数据（只包含直播中和倒计时状态的直播）
      // id: 2 是直播中，id: 1, 4, 6, 10 是倒计时状态
      const defaultEnrolledIds = [2, 1, 4, 6, 10];
      enrolledIds = new Set(defaultEnrolledIds);
      localStorage.setItem(ENROLL_KEY, JSON.stringify(defaultEnrolledIds));
    }
  } catch {
    // 如果出错，也初始化默认数据
    const defaultEnrolledIds = [2, 1, 4, 6, 10];
    enrolledIds = new Set(defaultEnrolledIds);
  }

  function saveEnrollState() {
    try {
      localStorage.setItem(ENROLL_KEY, JSON.stringify(Array.from(enrolledIds)));
    } catch {}
  }

  // 筛选 chips
  filterChips.forEach(chip => {
    chip.addEventListener('click', () => {
      const type = chip.dataset.filter;
      const value = chip.dataset.value;

      document.querySelectorAll(`.filter-chip[data-filter="${type}"]`)
        .forEach(c => c.classList.remove('filter-chip-active'));
      chip.classList.add('filter-chip-active');

      filters[type] = value;
      applyFiltersAndRender();
    });
  });

  // 搜索
  searchInput.addEventListener('input', () => {
    filters.search = searchInput.value.trim().toLowerCase();
    applyFiltersAndRender();
  });

  // 排序
  sortSelect.addEventListener('change', () => {
    applyFiltersAndRender();
  });

  // 分页
  prevBtn.addEventListener('click', () => {
    if (currentPage > 1) {
      currentPage--;
      renderList();
    }
  });
  nextBtn.addEventListener('click', () => {
    const totalPages = Math.ceil(filteredLives.length / pageSize) || 1;
    if (currentPage < totalPages) {
      currentPage++;
      renderList();
    }
  });

  // 时间工具函数
  function isToday(dateStr) {
    const d = new Date(dateStr);
    const now = new Date();
    return d.toDateString() === now.toDateString();
  }
  function isThisWeek(dateStr) {
    const d = new Date(dateStr);
    const now = new Date();
    const day = now.getDay() || 7;
    const weekStart = new Date(now);
    weekStart.setHours(0,0,0,0);
    weekStart.setDate(now.getDate() - day + 1);
    const weekEnd = new Date(weekStart);
    weekEnd.setDate(weekStart.getDate() + 6);
    return d >= weekStart && d <= weekEnd;
  }
  function isThisMonth(dateStr) {
    const d = new Date(dateStr);
    const now = new Date();
    return d.getFullYear() === now.getFullYear() && d.getMonth() === now.getMonth();
  }

  // 应用筛选
  function applyFiltersAndRender() {
    filteredLives = allLives.filter(l => {
      const mc = filters.category === 'all' || l.category === filters.category;
      const mk = filters.track === 'all' || l.track === filters.track;
      const kw = filters.search;
      const mkw = !kw ||
        l.title.toLowerCase().includes(kw) ||
        l.source.toLowerCase().includes(kw) ||
        (l.category || '').toLowerCase().includes(kw) ||
        (l.track || '').toLowerCase().includes(kw);

      return mc && mk && mkw;
    });

    // 排序逻辑
    const sortBy = sortSelect.value;
    if (sortBy === 'newest') {
      // 最新：按时间倒序（最近的靠前）
      filteredLives.sort((a, b) => new Date(b.date) - new Date(a.date));
    } else if (sortBy === 'most-popular') {
      // 最热：按预约人数倒序
      filteredLives.sort((a, b) => b.attendees - a.attendees);
    }
    
    // 始终按照状态优先级排序：直播中 > 倒计时 > 精彩回顾 > 已结束
    filteredLives.sort((a, b) => {
      const statusPriority = {
        'live': 0,       // 直播中优先级最高
        'upcoming': 1,   // 倒计时次之
        'ended': 2       // 已结束（包括精彩回顾）优先级最低
      };
      
      // 先按状态优先级排序
      if (statusPriority[a.status] !== statusPriority[b.status]) {
        return statusPriority[a.status] - statusPriority[b.status];
      }
      
      // 状态相同时，按时间排序
      // 对于upcoming状态，按日期升序排列（最近的在前），其他状态按日期降序排列
      if (a.status === 'upcoming') {
        return new Date(a.date) - new Date(b.date);  // 日期升序（最近的在前）
      } else {
        return new Date(b.date) - new Date(a.date);  // 日期降序
      }
    });

    currentPage = 1;
    updateFilterText();
    renderList();
  }

  function updateFilterText() {
    const parts = [];
    if (filters.category !== 'all') parts.push(`类别：${filters.category}`);
    if (filters.track !== 'all') parts.push(`赛道：${filters.track}`);
    if (filters.search) parts.push(`关键词：“${filters.search}”`);
    activeFilterText.textContent = '已选条件：' + (parts.length ? parts.join(' / ') : '全部');
  }

  // 计算倒计时天数（只返回正数）
  function getCountdownDays(dateStr) {
    const eventDate = new Date(dateStr);
    const now = new Date();
    const diffTime = eventDate - now;
    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
    return Math.max(0, diffDays);
  }

  // 渲染直播卡片（通用函数）
  function createLiveCard(l) {
    const card = document.createElement('article');
    const statusMap = {
      upcoming: { text: '未开始', cls: 'status-badge-upcoming' },
      live: { text: '直播中', cls: 'status-badge-live' },
      ended: { text: '精彩回顾', cls: 'status-badge-ended' }
    };
    const st = statusMap[l.status] || statusMap.upcoming;
    const isEnrolled = enrolledIds.has(l.id);
    const countdownDays = l.status === 'upcoming' ? getCountdownDays(l.date) : 0;
    const statusText = l.status === 'upcoming' ? `倒计时 ${countdownDays} 天` : st.text;

    card.className = 'glass-card rounded-3xl border border-gray-300 overflow-hidden hover:-translate-y-1 hover:border-[#2D874B]/80 transition cursor-pointer flex flex-col';
    card.innerHTML = `
      <div class="relative flex-shrink-0">
        <img src="${l.cover}" alt="${l.title}" class="w-full object-cover" style="aspect-ratio: 590/670;">  <!-- 修改为590:670比例 -->
        <div class="absolute top-2 left-2">
          <span class="inline-flex items-center px-2 py-0.5 rounded-full border text-[10px] ${st.cls}">
            <i class="fa fa-broadcast-tower mr-1 text-[8px]"></i>${statusText}
          </span>
        </div>
        <div class="absolute top-2 right-2 bg-black bg-opacity-60 text-white text-[10px] rounded-lg px-2 py-1 flex items-center">
          <span><i class="fa fa-users mr-1"></i> ${l.status === 'live' ? (l.attendees * 1.5).toLocaleString() : l.attendees.toLocaleString()}</span>
        </div>
        <!-- 中间进入直播间按钮 -->
        ${l.status === 'live' ? `
        <div class="absolute inset-0 flex items-center justify-center">
          <a href="live-room.html" target="_blank" class="flex items-center justify-center bg-black bg-opacity-50 text-white px-6 py-4 rounded-full hover:bg-opacity-70 transition-all">
            <i class="fa fa-music text-2xl mr-2"></i>
            <span class="text-sm font-medium">进入直播间</span>
          </a>
        </div>
        ` : ''}
        <!-- 标题和日期覆盖在图片下方 -->
        <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-3 text-white">
          <a href="live-detail.html" target="_blank" class="block hover:opacity-90 transition-opacity">
            <h3 class="text-sm font-semibold line-clamp-2 mb-1">${l.title}</h3>
          </a>
          <div class="flex items-center justify-between text-xs text-gray-200">
            <span>${l.date}</span>
            ${l.status === 'live' ? `
              <div class="flex gap-1">
                <a href="live-detail.html" target="_blank" class="px-2 py-1 rounded-full text-[10px] font-medium bg-[#2D874B] text-white hover:opacity-90">
                  观看
                </a>
              </div>
            ` : `
              <button
                class="enroll-btn px-2 py-1 rounded-full text-[10px] font-medium
                       ${l.status === 'ended'
                          ? 'bg-gray-200 text-gray-500 border border-gray-300 cursor-not-allowed opacity-60'
                          : (isEnrolled
                              ? 'bg-white border border-[#B01F24] text-[#B01F24] hover:bg-gray-50'
                              : 'bg-[#2D874B] text-white hover:opacity-90')}"
                data-id="${l.id}"
                data-status="${l.status}">
                ${l.status === 'ended' ? '已结束' : (isEnrolled ? '取消预约' : '预约')}
              </button>
            `}
          </div>
        </div>
      </div>
    `;

    return card;
  }

  // 渲染正在直播卡片（特殊函数，使用1274:824比例）
  function createLiveNowCard(l) {
    const card = document.createElement('article');
    const statusMap = {
      upcoming: { text: '未开始', cls: 'status-badge-upcoming' },
      live: { text: '直播中', cls: 'status-badge-live' },
      ended: { text: '精彩回顾', cls: 'status-badge-ended' }
    };
    const st = statusMap[l.status] || statusMap.upcoming;
    const isEnrolled = enrolledIds.has(l.id);
    const countdownDays = l.status === 'upcoming' ? getCountdownDays(l.date) : 0;
    const statusText = l.status === 'upcoming' ? `倒计时 ${countdownDays} 天` : st.text;

    card.className = 'glass-card rounded-3xl border border-gray-300 overflow-hidden hover:-translate-y-1 hover:border-[#2D874B]/80 transition cursor-pointer flex flex-col';
    card.innerHTML = `
      <div class="relative flex-shrink-0">
        <img src="${l.cover}" alt="${l.title}" class="w-full object-cover" style="aspect-ratio: 1274/824;">  <!-- 专门用于正在直播区域的1274:824比例 -->
        <div class="absolute top-2 left-2">
          <span class="inline-flex items-center px-2 py-0.5 rounded-full border text-[10px] ${st.cls}">
            <i class="fa fa-broadcast-tower mr-1 text-[8px]"></i>${statusText}
          </span>
        </div>
        <div class="absolute top-2 right-2 bg-black bg-opacity-60 text-white text-[10px] rounded-lg px-2 py-1 flex items-center">
          <span><i class="fa fa-users mr-1"></i> ${l.status === 'live' ? (l.attendees * 1.5).toLocaleString() : l.attendees.toLocaleString()}</span>
        </div>
        <!-- 中间进入直播间按钮 -->
        ${l.status === 'live' ? `
        <div class="absolute inset-0 flex items-center justify-center">
          <a href="live-room.html" target="_blank" class="flex items-center justify-center bg-black bg-opacity-50 text-white px-6 py-4 rounded-full hover:bg-opacity-70 transition-all">
            <i class="fa fa-music text-2xl mr-2"></i>
            <span class="text-sm font-medium">进入直播间</span>
          </a>
        </div>
        ` : ''}
        <!-- 标题和日期覆盖在图片下方 -->
        <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-3 text-white">
          <a href="live-detail.html" target="_blank" class="block hover:opacity-90 transition-opacity">
            <h3 class="text-sm font-semibold line-clamp-2 mb-1">${l.title}</h3>
          </a>
          <div class="flex items-center justify-between text-xs text-gray-200">
            <span>${l.date}</span>
            ${l.status === 'live' ? `
              <div class="flex gap-1">
                <a href="live-detail.html" target="_blank" class="px-2 py-1 rounded-full text-[10px] font-medium bg-[#2D874B] text-white hover:opacity-90">
                  观看
                </a>
              </div>
            ` : `
              <button
                class="enroll-btn px-2 py-1 rounded-full text-[10px] font-medium
                       ${l.status === 'ended'
                          ? 'bg-gray-200 text-gray-500 border border-gray-300 cursor-not-allowed opacity-60'
                          : (isEnrolled
                              ? 'bg-white border border-[#B01F24] text-[#B01F24] hover:bg-gray-50'
                              : 'bg-[#2D874B] text-white hover:opacity-90')}"
                data-id="${l.id}"
                data-status="${l.status}">
                ${l.status === 'ended' ? '已结束' : (isEnrolled ? '取消预约' : '预约')}
              </button>
            `}
          </div>
        </div>
      </div>
    `;

    return card;
  }

  // 渲染即将直播主卡片（特殊函数，使用1274:824比例但尺寸较小）
  function createUpcomingMainCard(l) {
    const card = document.createElement('article');
    const statusMap = {
      upcoming: { text: '未开始', cls: 'status-badge-upcoming' },
      live: { text: '直播中', cls: 'status-badge-live' },
      ended: { text: '精彩回顾', cls: 'status-badge-ended' }
    };
    const st = statusMap[l.status] || statusMap.upcoming;
    const isEnrolled = enrolledIds.has(l.id);
    const countdownDays = l.status === 'upcoming' ? getCountdownDays(l.date) : 0;
    const statusText = l.status === 'upcoming' ? `倒计时 ${countdownDays} 天` : st.text;

    card.className = 'glass-card rounded-3xl border border-gray-300 overflow-hidden hover:-translate-y-1 hover:border-[#2D874B]/80 transition cursor-pointer flex flex-col max-w-md';  /* 添加最大宽度限制，使卡片小一点 */
    card.innerHTML = `
      <div class="relative flex-shrink-0">
        <img src="${l.cover}" alt="${l.title}" class="w-full object-cover" style="aspect-ratio: 1274/824;">  <!-- 与正在直播相同的1274:824比例，但尺寸较小 -->
        <div class="absolute top-2 left-2">
          <span class="inline-flex items-center px-2 py-0.5 rounded-full border text-[10px] ${st.cls}">
            <i class="fa fa-broadcast-tower mr-1 text-[8px]"></i>${statusText}
          </span>
        </div>
        <div class="absolute top-2 right-2 bg-black bg-opacity-60 text-white text-[10px] rounded-lg px-2 py-1 flex items-center">
          <span><i class="fa fa-users mr-1"></i> ${l.attendees.toLocaleString()}</span>
        </div>
        <!-- 标题和日期覆盖在图片下方 -->
        <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-3 text-white">
          <a href="live-detail.html" target="_blank" class="block hover:opacity-90 transition-opacity">
            <h3 class="text-sm font-semibold line-clamp-2 mb-1">${l.title}</h3>
          </a>
          <div class="flex items-center justify-between text-xs text-gray-200">
            <span>${l.date}</span>
            <button
              class="enroll-btn px-2 py-1 rounded-full text-[10px] font-medium
                     ${isEnrolled
                        ? 'bg-white border border-[#B01F24] text-[#B01F24] hover:bg-gray-50'
                        : 'bg-[#2D874B] text-white hover:opacity-90'}"
              data-id="${l.id}"
              data-status="${l.status}">
              ${isEnrolled ? '取消预约' : '预约'}
            </button>
          </div>
        </div>
      </div>
    `;

    return card;
  }

  // 渲染正在直播列表
  function renderLiveNowList() {
    liveNowList.innerHTML = '';
    const liveNowData = allLives.filter(l => l.status === 'live').slice(0, 2);

    if (liveNowData.length === 0) {
      liveNowList.innerHTML = '<div class="w-full text-center py-8 text-gray-500">暂无正在直播的内容</div>';
      return;
    }

    liveNowData.forEach(l => {
      const card = createLiveNowCard(l);  // 使用专门的函数，带有1274:824比例
      liveNowList.appendChild(card);
    });

    // 绑定预约/取消预约
    bindEnrollEvents();
  }

  // 渲染即将直播列表
  function renderUpcomingList() {
    // 获取即将直播的数据并按日期升序排序（最近的在前）
    const upcomingData = allLives.filter(l => l.status === 'upcoming')
      .sort((a, b) => new Date(a.date) - new Date(b.date));

    if (upcomingData.length === 0) {
      document.getElementById('upcoming-main-card').innerHTML = '<div class="w-full text-center py-8 text-gray-500">暂无即将开始的直播</div>';
      document.getElementById('upcoming-date-list').innerHTML = '';
      document.getElementById('upcoming-description').innerHTML = '';
      return;
    }

    // 显示第一个（最近的）直播作为主卡片
    const firstUpcoming = upcomingData[0];
    const mainCard = createUpcomingMainCard(firstUpcoming);  // 使用专门的函数，带有1274:824比例但尺寸较小
    document.getElementById('upcoming-main-card').innerHTML = '';
    document.getElementById('upcoming-main-card').appendChild(mainCard);

    // 显示第一个（最近的）直播的简介
    const descriptionHtml = `
      <div class="relative h-full flex flex-col">
        <h3 class="text-lg font-semibold text-gray-800 mb-3">${firstUpcoming.title}</h3>
        <p class="text-sm text-gray-600 leading-relaxed flex-grow">
          本次直播将深入讲解云原生架构设计理念、微服务拆分原则、容器编排最佳实践，并结合真实项目 DEMO 演示，帮助伙伴快速掌握云原生落地方法。
        </p>
        <div class="flex items-center justify-between mt-3 pt-3 border-t border-gray-200">
          <span class="text-xs text-gray-600">主讲人：王云</span>
          <button class="enroll-btn px-2 py-1 rounded-full text-[10px] font-medium
                   ${(firstUpcoming.status === 'ended' || !enrolledIds.has(firstUpcoming.id))
                      ? 'bg-[#2D874B] text-white hover:opacity-90'
                      : 'bg-white border border-[#B01F24] text-[#B01F24] hover:bg-gray-50'}"
            data-id="${firstUpcoming.id}"
            data-status="${firstUpcoming.status}">
            ${(firstUpcoming.status === 'ended' || !enrolledIds.has(firstUpcoming.id)) ? '预约' : '取消预约'}
          </button>
        </div>
      </div>
    `;
    document.getElementById('upcoming-description').innerHTML = descriptionHtml;

    // 生成右侧日期列表
    const dateListHtml = upcomingData.map((l, index) => {
      const dateObj = new Date(l.date);
      const year = dateObj.getFullYear();
      const month = String(dateObj.getMonth() + 1).padStart(2, '0');
      const day = String(dateObj.getDate()).padStart(2, '0');
      const hours = String(dateObj.getHours()).padStart(2, '0');
      const minutes = String(dateObj.getMinutes()).padStart(2, '0');
      const isEnrolled = enrolledIds.has(l.id);
      
      return `
        <div class="date-item px-4 py-3 border-b border-gray-200 last:border-b-0 cursor-pointer hover:bg-gray-50 transition-colors ${index === 0 ? 'bg-blue-50' : ''}" 
             data-index="${index}">
          <div class="flex justify-between items-start">
            <div class="flex-1 min-w-0">
              <div class="font-medium text-gray-800">${year}-${month}-${day} ${hours}:${minutes}</div>
              <div class="text-sm text-gray-600 truncate mt-1">${l.title}</div>
            </div>
            <div class="ml-2">
              <a href="live-detail.html" class="text-xs px-2 py-1 rounded-full font-medium bg-white border border-gray-300 hover:bg-gray-50">
                详情
              </a>
            </div>
          </div>
        </div>
      `;
    }).join('');

    document.getElementById('upcoming-date-list').innerHTML = dateListHtml;

    // 绑定日期项点击事件
    document.querySelectorAll('#upcoming-date-list .date-item').forEach(item => {
      item.addEventListener('click', function() {
        // 移除之前的选择状态
        document.querySelectorAll('#upcoming-date-list .date-item').forEach(el => {
          el.classList.remove('bg-blue-50');
        });
        
        // 添加当前选择状态
        this.classList.add('bg-blue-50');
        
        // 获取索引并显示相应的直播卡片
        const index = parseInt(this.getAttribute('data-index'));
        const selectedLive = upcomingData[index];
        const selectedCard = createUpcomingMainCard(selectedLive);  // 使用统一的函数保持比例一致
        
        document.getElementById('upcoming-main-card').innerHTML = '';
        document.getElementById('upcoming-main-card').appendChild(selectedCard);
        
        // 更新简介内容
        const descriptionHtml = `
          <div class="relative h-full flex flex-col">
            <h3 class="text-lg font-semibold text-gray-800 mb-3">${selectedLive.title}</h3>
            <p class="text-sm text-gray-600 leading-relaxed flex-grow">
              本次直播将深入讲解云原生架构设计理念、微服务拆分原则、容器编排最佳实践，并结合真实项目 DEMO 演示，帮助伙伴快速掌握云原生落地方法。
            </p>
            <div class="flex items-center justify-between mt-3 pt-3 border-t border-gray-200">
              <span class="text-xs text-gray-600">主讲人：王云</span>
              <button class="enroll-btn px-2 py-1 rounded-full text-[10px] font-medium
                       ${(selectedLive.status === 'ended' || !enrolledIds.has(selectedLive.id))
                          ? 'bg-[#2D874B] text-white hover:opacity-90'
                          : 'bg-white border border-[#B01F24] text-[#B01F24] hover:bg-gray-50'}"
                data-id="${selectedLive.id}"
                data-status="${selectedLive.status}">
                ${(selectedLive.status === 'ended' || !enrolledIds.has(selectedLive.id)) ? '预约' : '取消预约'}
              </button>
            </div>
          </div>
        `;
        document.getElementById('upcoming-description').innerHTML = descriptionHtml;
        
        // 重新绑定预约/取消预约事件
        bindEnrollEvents();
      });
    });

    // 绑定预约/取消预约
    bindEnrollEvents();
  }

  // 渲染全部直播列表
  function renderAllLiveList() {
    allLiveList.innerHTML = '';
    const total = filteredLives.length;
    const totalPages = Math.ceil(total / pageSize) || 1;
    const startIndex = (currentPage - 1) * pageSize;
    const endIndex = Math.min(startIndex + pageSize, total);
    const pageData = filteredLives.slice(startIndex, endIndex);

    if (pageData.length === 0) {
      allLiveList.innerHTML = '<div class="w-full text-center py-8 text-gray-500">暂无符合条件的直播</div>';
    } else {
      pageData.forEach((l, index) => {
        // 检查是否是最后一个卡片且状态为ended
        if (index === pageData.length - 1 && l.status === 'ended') {
          // 创建一个临时副本，修改状态文本
          const modifiedLive = { ...l };
          // 渲染卡片时特殊处理状态文本
          const card = document.createElement('article');
          const statusMap = {
            upcoming: { text: '未开始', cls: 'status-badge-upcoming' },
            live: { text: '直播中', cls: 'status-badge-live' },
            ended: { text: '已结束', cls: 'status-badge-ended' }
          };
          const st = statusMap[modifiedLive.status] || statusMap.upcoming;
          const isEnrolled = enrolledIds.has(modifiedLive.id);
          const countdownDays = modifiedLive.status === 'upcoming' ? getCountdownDays(modifiedLive.date) : 0;
          const statusText = modifiedLive.status === 'upcoming' ? `倒计时 ${countdownDays} 天` : st.text;
          
          // 网格卡片（用于即将直播和全部直播区域）
          card.className = 'glass-card rounded-3xl border border-gray-300 overflow-hidden hover:-translate-y-1 hover:border-[#2D874B]/80 transition cursor-pointer flex flex-col';
          card.innerHTML = `
            <div class="relative flex-shrink-0">
              <img src="${modifiedLive.cover}" alt="${modifiedLive.title}" class="w-full object-cover" style="aspect-ratio: 590/670;">  <!-- 修改为590:670比例 -->
              <div class="absolute top-2 left-2">
                <span class="inline-flex items-center px-2 py-0.5 rounded-full border text-[10px] ${st.cls}">
                  <i class="fa fa-broadcast-tower mr-1 text-[8px]"></i>${statusText}
                </span>
              </div>
              <div class="absolute top-2 right-2 bg-black bg-opacity-60 text-white text-[10px] rounded-lg px-2 py-1 flex items-center">
                <span><i class="fa fa-users mr-1"></i> ${modifiedLive.status === 'live' ? (modifiedLive.attendees * 1.5).toLocaleString() : modifiedLive.attendees.toLocaleString()}</span>
              </div>
              <!-- 中间进入直播间按钮 -->
              ${modifiedLive.status === 'live' ? `
              <div class="absolute inset-0 flex items-center justify-center">
                <a href="live-room.html" target="_blank" class="flex items-center justify-center bg-black bg-opacity-50 text-white px-6 py-4 rounded-full hover:bg-opacity-70 transition-all">
                  <i class="fa fa-music text-2xl mr-2"></i>
                  <span class="text-sm font-medium">进入直播间</span>
                </a>
              </div>
              ` : ''}
              <!-- 标题和日期覆盖在图片下方 -->
              <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-3 text-white">
                <h3 class="text-sm font-semibold line-clamp-2 mb-1">${modifiedLive.title}</h3>
                <div class="flex items-center justify-between text-xs text-gray-200">
                  <span>${modifiedLive.date}</span>
                  <button
                    class="enroll-btn px-2 py-1 rounded-full text-[10px] font-medium
                           ${modifiedLive.status === 'ended'
                              ? 'bg-gray-200 text-gray-500 border border-gray-300 cursor-not-allowed opacity-60'
                              : (isEnrolled
                                  ? 'bg-white border border-[#B01F24] text-[#B01F24] hover:bg-gray-50'
                                  : 'bg-[#2D874B] text-white hover:opacity-90')}"
                    data-id="${modifiedLive.id}"
                    data-status="${modifiedLive.status}">
                    ${modifiedLive.status === 'ended' ? '已结束' : (isEnrolled ? '取消预约' : (modifiedLive.status === 'live' ? '观看' : '预约'))}
                  </button>
                </div>
              </div>
            </div>
          `;
          allLiveList.appendChild(card);
        } else {
          // 正常渲染其他卡片
          const card = createLiveCard(l);
          allLiveList.appendChild(card);
        }
      });

      // 绑定预约/取消预约
      bindEnrollEvents();
    }

    // 分页信息
    totalCountEl.textContent = total;
    currentRangeEl.textContent = total ? `${startIndex + 1}–${endIndex}` : '0–0';
    pageInfoEl.textContent = `${currentPage} / ${totalPages}`;

    prevBtn.disabled = currentPage === 1;
    nextBtn.disabled = currentPage === totalPages;
    prevBtn.classList.toggle('opacity-50', prevBtn.disabled);
    nextBtn.classList.toggle('opacity-50', nextBtn.disabled);
  }

  // 绑定预约/取消预约事件
  function bindEnrollEvents() {
    document.querySelectorAll('.enroll-btn').forEach(btn => {
      btn.addEventListener('click', e => {
        e.stopPropagation();
        const id = parseInt(btn.dataset.id, 10);
        const status = btn.dataset.status;

        if (status === 'ended') {
          alert('该直播已结束，无法预约。');
          return;
        }

        if (enrolledIds.has(id)) {
          // 取消预约
          if (!confirm('确认取消该直播的预约吗？')) return;
          enrolledIds.delete(id);
          saveEnrollState();
          alert('已取消预约。');
        } else {
          // 预约
          enrolledIds.add(id);
          saveEnrollState();
          alert('预约成功，开播前可在「直播中心 - 我的预约」中查看。');
        }
        // 重新渲染所有列表
        renderLiveNowList();
        renderUpcomingList();
        renderAllLiveList();
        renderFollowList();
        renderBookingList();
      });
    });
  }

  // 创建关注/预约卡片（用于横向滚动列表）
  function createFollowCard(l) {
    const card = document.createElement('div');
    const statusMap = {
      upcoming: { text: '未开始', cls: 'status-badge-upcoming', icon: 'fa-clock' },
      live: { text: '直播中', cls: 'status-badge-live', icon: 'fa-broadcast-tower' },
      ended: { text: '精彩回顾', cls: 'status-badge-ended', icon: 'fa-history' }
    };
    const st = statusMap[l.status] || statusMap.upcoming;
    const countdownDays = l.status === 'upcoming' ? getCountdownDays(l.date) : 0;
    const statusText = l.status === 'upcoming' ? `倒计时 ${countdownDays} 天` : st.text;
    const isEnrolled = enrolledIds.has(l.id);

    card.className = 'glass-card rounded-3xl border border-gray-300 overflow-hidden hover:-translate-y-1 hover:border-[#2D874B]/80 transition cursor-pointer flex flex-col';
    card.innerHTML = `
      <div class="relative flex-shrink-0">
        <img src="${l.cover}" alt="${l.title}" class="w-full object-cover" style="aspect-ratio: 586/672;">
        <div class="absolute top-2 left-2">
          <span class="inline-flex items-center px-2 py-0.5 rounded-full border text-[10px] ${st.cls}">
            <i class="fa ${st.icon} mr-1 text-[8px]"></i>${statusText}
          </span>
        </div>
        <div class="absolute top-2 right-2 bg-black bg-opacity-60 text-white text-[10px] rounded-lg px-2 py-1 flex items-center">
          <span><i class="fa fa-users mr-1"></i> ${l.status === 'live' ? (l.attendees * 1.5).toLocaleString() : l.attendees.toLocaleString()}</span>
        </div>
        ${l.status === 'live' ? `
        <div class="absolute bottom-2 right-2">
          <a href="live-room.html" class="px-2 py-1 rounded-full text-[10px] font-medium bg-[#2D874B] text-white hover:opacity-90">
            观看
          </a>
        </div>
        ` : l.status === 'ended' ? `
        <div class="absolute bottom-2 right-2">
          <a href="#" class="px-2 py-1 rounded-full text-[10px] font-medium bg-[#2D874B] text-white hover:opacity-90">
            回放
          </a>
        </div>
        ` : `
        <div class="absolute bottom-2 right-2">
          <button class="enroll-btn px-2 py-1 rounded-full text-[10px] font-medium
                 ${isEnrolled
                    ? 'bg-white border border-[#B01F24] text-[#B01F24] hover:bg-gray-50'
                    : 'bg-[#2D874B] text-white hover:opacity-90'}"
            data-id="${l.id}"
            data-status="${l.status}">
            ${isEnrolled ? '取消预约' : '预约'}
          </button>
        </div>
        `}
      </div>
      <div class="p-3">
        <h3 class="text-sm font-semibold line-clamp-1 mb-1">${l.title}</h3>
        <div class="text-xs text-gray-500">${l.date}</div>
      </div>
    `;
    return card;
  }

  // 渲染我的关注列表
  function renderFollowList() {
    const followList = document.getElementById('follow-list');
    followList.innerHTML = '';
    
    // 模拟关注数据（实际应该从后端获取）
    const followData = allLives.filter(l => {
      // 这里可以根据实际业务逻辑筛选关注的直播
      // 暂时显示所有状态的直播作为示例
      return true;
    }).slice(0, 8); // 限制显示数量

    if (followData.length === 0) {
      followList.innerHTML = '<div class="w-full text-center py-8 text-gray-500">暂无关注的内容</div>';
      return;
    }

    followData.forEach(l => {
      const card = createFollowCard(l);
      followList.appendChild(card);
    });

    bindEnrollEvents();
  }

  // 渲染我的预约列表（只显示直播中和倒计时状态）
  function renderBookingList() {
    const bookingList = document.getElementById('booking-list');
    bookingList.innerHTML = '';
    
    // 只显示已预约且状态为直播中或倒计时的直播
    const bookingData = allLives.filter(l => {
      return enrolledIds.has(l.id) && (l.status === 'live' || l.status === 'upcoming');
    }).sort((a, b) => {
      // 直播中优先，然后按时间排序
      if (a.status === 'live' && b.status !== 'live') return -1;
      if (a.status !== 'live' && b.status === 'live') return 1;
      return new Date(a.date) - new Date(b.date);
    });

    if (bookingData.length === 0) {
      bookingList.innerHTML = '<div class="w-full text-center py-8 text-gray-500">暂无预约的直播</div>';
      return;
    }

    bookingData.forEach(l => {
      const card = createFollowCard(l);
      bookingList.appendChild(card);
    });

    bindEnrollEvents();
  }

  // 标签切换功能
  const tabFollow = document.getElementById('tab-follow');
  const tabBooking = document.getElementById('tab-booking');
  const followList = document.getElementById('follow-list');
  const bookingList = document.getElementById('booking-list');

  tabFollow.addEventListener('click', () => {
    tabFollow.style.borderBottom = '2px solid #B01F24';
    tabFollow.classList.remove('text-gray-600');
    tabFollow.classList.add('text-[#B01F24]');
    tabBooking.style.borderBottom = '2px solid transparent';
    tabBooking.classList.remove('text-[#B01F24]');
    tabBooking.classList.add('text-gray-600');
    followList.classList.remove('hidden');
    bookingList.classList.add('hidden');
  });

  tabBooking.addEventListener('click', () => {
    tabBooking.style.borderBottom = '2px solid #B01F24';
    tabBooking.classList.remove('text-gray-600');
    tabBooking.classList.add('text-[#B01F24]');
    tabFollow.style.borderBottom = '2px solid transparent';
    tabFollow.classList.remove('text-[#B01F24]');
    tabFollow.classList.add('text-gray-600');
    bookingList.classList.remove('hidden');
    followList.classList.add('hidden');
    renderBookingList(); // 切换时重新渲染预约列表
  });

  // 渲染列表（主函数）
  function renderList() {
    renderLiveNowList();
    renderUpcomingList();
    renderAllLiveList();
    renderFollowList();
    renderBookingList();
  }

  // 初始化
  document.querySelectorAll('.filter-chip[data-filter="category"][data-value="all"], .filter-chip[data-filter="track"][data-value="all"]').forEach(chip => {
    chip.classList.add('filter-chip-active');
  });
  applyFiltersAndRender();
</script>

</body>
</html>