<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI智能体 - 曙光学习平台</title>
    <link rel="stylesheet" href="css/tailwind.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            background-color: #f5f7fb;
            color: #333;
            height: 100vh;
            overflow: hidden;
        }
        
        .chat-container {
            display: flex;
            height: 100vh;
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            box-shadow: 0 0 40px rgba(0, 0, 0, 0.05);
            border-radius: 12px;
            overflow: hidden;
        }
        
        .sidebar {
            width: 260px;
            background: #f8fafd;
            border-right: 1px solid #eaecef;
            display: flex;
            flex-direction: column;
            padding: 16px;
            transition: all 0.3s ease;
        }
        
        .sidebar-header {
            padding: 12px 0;
            border-bottom: 1px solid #eaecef;
            margin-bottom: 16px;
        }
        
        .sidebar-title {
            font-size: 16px;
            font-weight: 600;
            color: #333;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .sidebar-actions {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .sidebar-btn {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 16px;
            border-radius: 8px;
            border: 1px solid #eaecef;
            background: white;
            color: #333;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .sidebar-btn:hover {
            background: #f0f4ff;
            border-color: #b0c4ff;
        }
        
        .sidebar-btn.active {
            background: #e6eeff;
            border-color: #4a86ff;
            color: #1a56db;
        }
        
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: #f8fafd;
        }
        
        .chat-header {
            padding: 16px 24px;
            border-bottom: 1px solid #eaecef;
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: white;
        }
        
        .chat-title-area {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 16px;
        }
        
        .chat-title {
            font-size: 16px;
            font-weight: 600;
            color: #333;
        }
        
        .chat-subtitle {
            font-size: 13px;
            color: #666;
        }
        
        .close-btn {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f0f0f0;
            color: #666;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .close-btn:hover {
            background: #e0e0e0;
            color: #333;
        }
        
        .messages-container {
            flex: 1;
            overflow-y: auto;
            padding: 24px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .message {
            display: flex;
            gap: 16px;
            max-width: 85%;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .user-message {
            align-self: flex-end;
        }
        
        .avatar-small {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: linear-gradient(135deg, #4a86ff, #667eea);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 14px;
            flex-shrink: 0;
        }
        
        .bot-avatar {
            background: linear-gradient(135deg, #667eea, #764ba2);
        }
        
        .message-content {
            padding: 16px;
            border-radius: 18px;
            line-height: 1.5;
            font-size: 15px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }
        
        .user-message .message-content {
            background: linear-gradient(135deg, #4a86ff, #667eea);
            color: white;
            border-bottom-right-radius: 4px;
        }
        
        .bot-message .message-content {
            background: white;
            border: 1px solid #eaecef;
            border-bottom-left-radius: 4px;
        }
        
        .quick-questions {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 16px;
        }
        
        .quick-question {
            padding: 8px 16px;
            background: #f0f4ff;
            border: 1px solid #d0ddf7;
            border-radius: 20px;
            font-size: 13px;
            color: #4a86ff;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .quick-question:hover {
            background: #e6eeff;
            border-color: #b0c4ff;
        }
        
        .input-area {
            padding: 12px 20px 18px;
            /* border-top: 1px solid #eaecef; */
            /* background: white; */
            margin-top: 0;
        }

        /* 能力场景 + 猜你想问 卡片区域 */
        .ability-panels {
            display: grid;
            grid-template-columns: 1.1fr 1.1fr;
            gap: 16px;
            max-width: 720px;          /* 宽度稍微窄一点 */
            margin: 40px auto 16px;    /* 在对话区中间偏上的位置居中 */
        }

        .ability-card {
            background: linear-gradient(135deg, #fff7f7, #fff9fb);
            border-radius: 18px;
            padding: 14px 16px 16px;
            box-shadow: 0 8px 18px rgba(255, 139, 154, 0.1);
            border: 1px solid rgba(255, 160, 180, 0.35);
        }

        .ability-card:nth-child(2) {
            background: linear-gradient(135deg, #fffaf3, #fff9f0);
            box-shadow: 0 8px 18px rgba(255, 179, 102, 0.12);
            border-color: rgba(255, 193, 120, 0.45);
        }

        .ability-card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 13px;
            color: #555;
        }

        .ability-card-title {
            font-size: 14px;
            font-weight: 600;
            color: #333;
        }

        .ability-card-page {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            font-size: 12px;
            color: #999;
        }

        .ability-card-page i {
            font-size: 11px;
        }

        .ability-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .ability-item {
            text-align: left;
            padding: 10px 12px;
            border-radius: 12px;
            border: none;
            background: rgba(255, 255, 255, 0.85);
            cursor: pointer;
            transition: all 0.18s ease;
        }

        .ability-item:hover {
            background: #ffffff;
            transform: translateY(-1px);
            box-shadow: 0 6px 12px rgba(255, 160, 180, 0.18);
        }

        .ability-item-title {
            font-size: 14px;
            font-weight: 500;
            color: #333;
            margin-bottom: 2px;
        }

        .ability-item-subtitle {
            font-size: 12px;
            color: #999;
        }

        .guess-questions {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 10px;
        }

        .guess-question {
            padding: 6px 10px;
            border-radius: 16px;
            border: none;
            background: rgba(255, 255, 255, 0.9);
            font-size: 12px;
            color: #666;
            cursor: pointer;
            transition: all 0.18s ease;
        }

        .guess-question:hover {
            background: #ffffff;
            color: #333;
            box-shadow: 0 4px 10px rgba(255, 193, 120, 0.25);
            transform: translateY(-1px);
        }

        .guess-banner {
            margin-top: 6px;
            padding: 10px 12px;
            border-radius: 12px;
            background: linear-gradient(90deg, #fef0ff, #e3f0ff);
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 8px;
        }

        .guess-banner-content {
            flex: 1;
        }

        .guess-banner-title {
            font-size: 13px;
            font-weight: 600;
            color: #444;
            margin-bottom: 2px;
        }

        .guess-banner-subtitle {
            font-size: 11px;
            color: #888;
        }

        .guess-banner-action {
            width: 28px;
            height: 28px;
            border-radius: 999px;
            background: #ffffff;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #ff8a4a;
            font-size: 13px;
        }

        /* 收起动画：回答问题时隐藏能力场景/猜你想问（以及可选的快捷提问） */
        .ability-panels,
        .quick-questions {
            transition: max-height 0.25s ease, opacity 0.2s ease, margin 0.25s ease;
            overflow: hidden;
        }

        .chat-container.panels-collapsed .ability-panels,
        .chat-container.panels-collapsed .quick-questions {
            max-height: 0 !important;
            opacity: 0;
            margin-bottom: 0 !important;
            pointer-events: none;
        }
        
        .input-container {
            display: flex;
            gap: 12px;
            align-items: flex-end;
        }
        
        .message-input {
            flex: 1;
            padding: 14px 16px;
            border: 1px solid #eaecef;
            border-radius: 12px;
            font-size: 15px;
            resize: none;
            min-height: 50px;
            max-height: 120px;
            outline: none;
            transition: border-color 0.2s;
        }
        
        .message-input:focus {
            border-color: #4a86ff;
            box-shadow: 0 0 0 2px rgba(74, 134, 255, 0.1);
        }
        
        .send-btn {
            width: 46px;
            height: 46px;
            border-radius: 12px;
            background: linear-gradient(135deg, #4a86ff, #667eea);
            color: white;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }
        
        .send-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(74, 134, 255, 0.3);
        }
        
        .resource-card {
            background: #f8fafd;
            border: 1px solid #eaecef;
            border-radius: 12px;
            padding: 16px;
            margin-top: 16px;
        }
        
        .resource-item {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }
        
        .resource-item:last-child {
            margin-bottom: 0;
        }
        
        .resource-img {
            width: 48px;
            height: 48px;
            border-radius: 8px;
            object-fit: cover;
        }
        
        .resource-info {
            flex: 1;
        }
        
        .resource-title {
            font-size: 14px;
            font-weight: 500;
            color: #333;
            margin-bottom: 2px;
        }
        
        .resource-desc {
            font-size: 12px;
            color: #666;
        }
        
        .resource-btn {
            padding: 6px 12px;
            background: #4a86ff;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
        }
        
        .welcome-message {
            text-align: center;
            padding: 40px 20px;
            color: #666;
        }
        
        .welcome-icon {
            font-size: 48px;
            color: #a0aec0;
            margin-bottom: 16px;
        }
        
        .welcome-text {
            font-size: 16px;
            margin-bottom: 8px;
        }
        
        .welcome-subtext {
            font-size: 14px;
            color: #718096;
        }

        /* 对话结束后的进阶问题推荐区域 */
        .followups-container {
            margin: 8px 0 4px 46px; /* 与头像/气泡对齐，略微缩进 */
            display: flex;
            flex-direction: column;
            gap: 8px;
            max-width: 80%;
            align-items: flex-start;
        }

        .followup-btn {
            border: none;
            outline: none;
            background: #f3f4f6;
            color: #4b5563;
            border-radius: 999px;
            padding: 8px 14px;
            font-size: 13px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            cursor: pointer;
            transition: background 0.18s ease, transform 0.18s ease, box-shadow 0.18s ease;
        }

        .followup-btn:hover {
            background: #e5e7eb;
            transform: translateY(-1px);
            box-shadow: 0 3px 8px rgba(15, 23, 42, 0.12);
        }

        .followup-btn span {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .followup-icon {
            font-size: 12px;
            color: #9ca3af;
        }
    </style>
</head>
<body>
    <div class="chat-container">
        <!-- 侧边栏 -->
        <div class="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-title">
                    <i class="fas fa-robot"></i>
                    <span>AI 智能体</span>
                </div>
            </div>
            <div class="sidebar-actions">
                <button class="sidebar-btn active">
                    <i class="fas fa-plus"></i>
                    <span>新对话</span>
                </button>
                <button class="sidebar-btn">
                    <i class="fas fa-star"></i>
                    <span>我的收藏</span>
                </button>
                <button class="sidebar-btn">
                    <i class="fas fa-history"></i>
                    <span>历史对话</span>
                </button>
            </div>
        </div>
        
        <!-- 主内容区域 -->
        <div class="main-content">
            <!-- 头部 -->
            <div class="chat-header">
                <div class="chat-title-area">
                    <div class="avatar">
                        <i class="fas fa-robot"></i>
                    </div>
                    <div>
                        <div class="chat-title">AI智能助手</div>
                        <div class="chat-subtitle">问你所惑，解你所需</div>
                    </div>
                </div>
                <a href="index.html" class="close-btn">
                    <i class="fas fa-times"></i>
                </a>
            </div>
            
            <!-- 消息区域 -->
            <div id="ai-messages" class="messages-container">
                <div class="message bot-message">
                    <div class="avatar-small bot-avatar">
                        <i class="fas fa-robot"></i>
                    </div>
                    <div class="message-content">
                        您好！我是AI智能助手，展示认证流程，包括考试预约、获取与验证证书的入口，以及可能涉及的重认证规则。有什么可以帮助您的吗？
                    </div>
                </div>

                <!-- 能力场景 + 猜你想问（移动到中间内容区域） -->
                <div class="ability-panels">
                    <!-- 左侧：能力场景 -->
                    <div class="ability-card">
                        <div class="ability-card-header">
                            <span class="ability-card-title">能力场景</span>
                            <div class="ability-card-page">
                                <span>2/3</span>
                                <i class="fas fa-angle-right"></i>
                            </div>
                        </div>
                        <div class="ability-list">
                            <button class="ability-item" data-question="在线学习">
                                <div class="ability-item-title">在线学习</div>
                                <div class="ability-item-subtitle">学习在线课程</div>
                            </button>
                            <button class="ability-item" data-question="认证其他问题">
                                <div class="ability-item-title">认证其他问题</div>
                                <div class="ability-item-subtitle">发起问题单</div>
                            </button>
                            <button class="ability-item" data-question="证书申请流程">
                                <div class="ability-item-title">证书申请流程</div>
                                <div class="ability-item-subtitle">认证证书申请流程</div>
                            </button>
                        </div>
                    </div>

                    <!-- 右侧：猜你想问 -->
                    <div class="ability-card">
                        <div class="ability-card-header">
                            <span class="ability-card-title">猜你想问</span>
                        </div>
                        <div class="guess-questions">
                            <button class="guess-question" data-question="HCIE实验预约及考位查询">实验预约及考位查询</button>
                            <button class="guess-question" data-question="认证考试证书有效期">认证考试证书有效期</button>
                            <button class="guess-question" data-question="取消考试政策">取消考试政策</button>
                        </div>
                        <div class="guess-banner">
                            <div class="guess-banner-content">
                                <div class="guess-banner-title">全新焕变</div>
                                <div class="guess-banner-subtitle">能力升级 AI 问答更懂你</div>
                            </div>
                            <div class="guess-banner-action">
                                <i class="fas fa-arrow-right"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 输入区域 -->
            <div class="input-area">
                <!-- 原有快捷提问，仍然保留 -->
                <div class="quick-questions" id="ai-quick-questions">
                    <button class="quick-question">如何参加考试？</button>
                    <button class="quick-question">如何认证成为高级云架构师？</button>
                    <button class="quick-question">如何查看和下载证书</button>
                </div>
                <div class="input-container" style="position: relative;">
                    <textarea 
                        id="ai-input" 
                        placeholder="输入您的问题..." 
                        class="message-input"
                        rows="1"
                    ></textarea>
                    <button id="ai-send" class="send-btn">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                    
                    <!-- 正式联想框样式 - 市面上常见的搜索联想 -->
                    <div id="suggestion-list" style="position: absolute; bottom: 100%; left: 0; right: 0; margin-bottom: 8px; background: white; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); z-index: 9999; display: none; overflow: hidden; width: 94%;">
                        <div style="padding: 12px 16px; font-size: 14px; color: #333; cursor: pointer; border-bottom: 1px solid #f0f0f0; transition: all 0.2s;"><span style="color: red;">智能</span>天线</div>
                        <div style="padding: 12px 16px; font-size: 14px; color: #333; cursor: pointer; border-bottom: 1px solid #f0f0f0; transition: all 0.2s;">全网<span style="color: red;">智能</span></div>
                        <div style="padding: 12px 16px; font-size: 14px; color: #333; cursor: pointer; transition: all 0.2s;">体系智<span style="color: red;">能</span>特性</div>
                    </div>
                </div>
            </div>

            <!-- 联想功能脚本 -->
            <script>
            document.addEventListener('DOMContentLoaded', function() {
                const input = document.getElementById('ai-input');
                const suggestion = document.getElementById('suggestion-list');
                
                if (input && suggestion) {
                    // 输入事件 - 输入1个字符就显示联想
                    input.addEventListener('input', function() {
                        const value = this.value;
                        
                        // 输入1个字符以上显示联想
                        if (value.length >= 1) {
                            suggestion.style.display = 'block';
                            
                            // 动态高亮匹配的字符（当输入"智能"时）
                            const items = suggestion.querySelectorAll('div');
                            items.forEach(item => {
                                const text = item.textContent;
                                let highlightedText = text;
                                
                                // 如果输入包含"智能"，高亮"智能"中的"能"字
                                // if (value.includes('智能')) {
                                //     highlightedText = highlightedText.replace(/智/g, '<span style="color: red;">智</span>');
                                // }
                                if (value.includes('智')) {
                                    highlightedText = highlightedText.replace(/智/g, '<span style="color: red;">智</span>');
                                }
                                if (value.includes('能')) {
                                    highlightedText = highlightedText.replace(/能/g, '<span style="color: red;">能</span>');
                                }

                                
                                // 更新HTML内容（注意：这里简单处理，实际应更精确）
                                if (item.innerHTML !== highlightedText) {
                                    item.innerHTML = highlightedText;
                                }
                            });
                        } else {
                            suggestion.style.display = 'none';
                        }
                    });
                    
                    // 点击联想项
                    suggestion.addEventListener('click', function(e) {
                        if (e.target.tagName === 'DIV') {
                            input.value = e.target.textContent;
                            suggestion.style.display = 'none';
                            input.focus();
                        }
                    });
                    
                    // 悬停效果
                    const items = suggestion.querySelectorAll('div');
                    items.forEach(item => {
                        item.addEventListener('mouseenter', function() {
                            this.style.background = '#f8fafd';
                            this.style.color = '#4a86ff';
                        });
                        item.addEventListener('mouseleave', function() {
                            this.style.background = '';
                            this.style.color = '#333';
                        });
                    });
                    
                    // 点击外部隐藏
                    document.addEventListener('click', function(e) {
                        if (!e.target.closest('.input-container') && !e.target.closest('#suggestion-list')) {
                            suggestion.style.display = 'none';
                        }
                    });
                    
                    console.log('✅ 正式联想功能已启用');
                }
            });
            </script>
        </div>
    </div>

    <script>
    // AI智能体功能
    document.addEventListener('DOMContentLoaded', function() {
        console.log('DOM加载完成，开始初始化AI智能体功能');
        
        const aiInput = document.getElementById('ai-input');
        const aiSend = document.getElementById('ai-send');
        const aiMessages = document.getElementById('ai-messages');
        const inputArea = document.querySelector('.input-area');
        const chatContainer = document.querySelector('.chat-container');
        const abilityPanels = document.querySelector('.ability-panels');

        function setPanelsCollapsed(collapsed) {
            if (!chatContainer) return;
            chatContainer.classList.toggle('panels-collapsed', !!collapsed);
        }
        
        // 自动调整文本框高度
        aiInput.addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = (this.scrollHeight > 120 ? 120 : this.scrollHeight) + 'px';
        });
        
        // 添加消息到对话框
        function addMessage(text, isUser = false) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user-message' : 'bot-message'}`;
            
            const avatarDiv = document.createElement('div');
            avatarDiv.className = `avatar-small ${isUser ? '' : 'bot-avatar'}`;
            avatarDiv.innerHTML = `<i class="fas ${isUser ? 'fa-user' : 'fa-robot'}"></i>`;
            
            const messageBubble = document.createElement('div');
            messageBubble.className = 'message-content';
            messageBubble.innerHTML = text;
            
            messageDiv.appendChild(avatarDiv);
            messageDiv.appendChild(messageBubble);
            aiMessages.appendChild(messageDiv);
            
            // 滚动到底部
            aiMessages.scrollTop = aiMessages.scrollHeight;
        }

        // 处理AI回复
        function handleAIResponse(userMessage) {
            // 模拟AI思考时间
            setTimeout(() => {
                const responses = {
                  '如何参加考试？': `
                    <div class="space-y-3">
                      <p>参加考试的具体流程如下：</p>
                      <ul class="list-disc list-inside space-y-1 text-gray-600">
                        <li>登录平台，进入"我的考试"页面</li>
                        <li>选择需要参加的考试科目</li>
                        <li>确认考试时间和要求</li>
                        <li>完成在线考试或预约线下考试</li>
                        <li>提交答卷后等待成绩公布</li>
                      </ul>
                      <div class="resource-card">
                        <div class="resource-item">
                          <img src="https://images.unsplash.com/photo-1581093458791-8a0a5d5c5f5a?auto=format&fit=crop&w=100&q=80" 
                               class="resource-img" 
                               alt="考试流程">
                          <div class="resource-info">
                            <div class="resource-title">考试流程详解视频</div>
                            <div class="resource-desc">详细讲解考试报名和参加流程</div>
                          </div>
                          <button class="resource-btn">
                            <i class="fas fa-play"></i> 播放
                          </button>
                        </div>
                      </div>
                    </div>
                  `,
                  '如何认证成为高级云架构师？': `
                    <div class="space-y-3">
                      <p>成为高级云架构师的认证路径：</p>
                      <ul class="list-disc list-inside space-y-1 text-gray-600">
                        <li>具备相关工作经验（3年以上云计算经验）</li>
                        <li>完成高级云架构师培训课程</li>
                        <li>通过理论考试和实操考核</li>
                        <li>提交项目案例和设计方案</li>
                        <li>通过专家评审委员会的审核</li>
                      </ul>
                      <div class="resource-card">
                        <div class="resource-item">
                          <img src="https://images.unsplash.com/photo-1551288049-bebda4e38f71?auto=format&fit=crop&w=100&q=80" 
                               class="resource-img" 
                               alt="云架构师认证">
                          <div class="resource-info">
                            <div class="resource-title">高级云架构师认证指南</div>
                            <div class="resource-desc">完整认证流程和备考策略</div>
                          </div>
                          <button class="resource-btn">
                            <i class="fas fa-play"></i> 播放
                          </button>
                        </div>
                      </div>
                    </div>
                  `,
                  '如何查看和下载证书': `
                    <div class="space-y-3">
                      <p>查看和下载证书的操作步骤：</p>
                      <ul class="list-disc list-inside space-y-1 text-gray-600">
                        <li>登录个人中心，进入"我的证书"页面</li>
                        <li>查看已获得的证书列表</li>
                        <li>点击证书查看详细信息</li>
                        <li>选择下载格式（PDF/图片）</li>
                        <li>验证证书真伪（可选）</li>
                      </ul>
                      <div class="resource-card">
                        <div class="resource-item">
                          <img src="https://images.unsplash.com/photo-1561070791-2526d30994b5?auto=format&fit=crop&w=100&q=80" 
                               class="resource-img" 
                               alt="证书管理">
                          <div class="resource-info">
                            <div class="resource-title">证书管理操作教程</div>
                            <div class="resource-desc">详细演示证书查看和下载流程</div>
                          </div>
                          <button class="resource-btn">
                            <i class="fas fa-play"></i> 播放
                          </button>
                        </div>
                      </div>
                    </div>
                  `,
                  '在线学习': '您可以通过平台的「课程学习」或「培训中心」模块，选择适合您的在线课程进行自主学习。支持视频课程、实验课程和配套资料下载。',
                  '认证其他问题': '如果您在认证过程中遇到其他问题，可以在「帮助与支持」或「工单中心」中发起问题单，我们会有专人进行跟进并答复。',
                  '证书申请流程': '通过考试后，系统会自动生成您的认证信息。您需要完善个人资料并提交证书申请，审核通过后即可在线查看与下载电子证书。',
                  'HCIE实验预约及考位查询': 'HCIE 实验考试需要提前在考试中心进行预约，您可以在「我的考试」中查看可预约考位与时间，并完成缴费后确认。',
                  '认证考试证书有效期': '大部分认证证书有效期为 3 年，具体以认证项目规则为准。您可以在「我的证书」中查看每张证书的有效期与到期提醒。',
                  '取消考试政策': '对于已预约的考试，如需取消或改期，请在考试规定时间前在「我的考试」中操作，逾期将可能无法退款或需要支付改期费用。',

                  // 进阶提问固定回答
                  '考试报名入口在哪里？': '您可以在平台顶部导航进入「考试中心」或「我的考试」，在「可报名考试」列表中点击对应考试右侧的“立即报名”按钮完成报名。',
                  '考试报名有哪些条件限制？': '不同考试的报名条件不同，一般包括：已完成指定先修课程、满足工作年限要求以及通过前置级别考试等，具体可在考试详情页查看。',
                  '如何查看考试成绩与证书获取情况？': '考试结束后，您可以在「我的考试」中查看成绩，在「我的证书」模块查看是否已生成对应证书及其状态。',

                  '高级云架构师培训课有哪些学习路径？': '通常包括基础云计算课程、高级架构设计课程以及实践项目课程，建议按“基础理论→核心技能→场景实践”的路径进行学习。',
                  '高级云架构师考试都考哪些内容？': '考试一般覆盖云基础架构设计、网络与安全、性能与高可用、成本优化以及典型行业场景设计等内容，具体以考试大纲为准。',

                  '证书到期前需要做哪些准备？': '建议提前 3-6 个月关注证书到期时间，了解重认证规则，规划好补修课程或重认证考试，避免证书失效影响个人资质。'
                };

                // 每个主问题对应的进阶推荐问题列表
                const followupsMap = {
                  '如何参加考试？': [
                    '考试报名入口在哪里？',
                    '考试报名有哪些条件限制？',
                    '如何查看考试成绩与证书获取情况？'
                  ],
                  '如何认证成为高级云架构师？': [
                    '高级云架构师培训课有哪些学习路径？',
                    '高级云架构师考试都考哪些内容？'
                  ],
                  '如何查看和下载证书': [
                    '证书到期前需要做哪些准备？',
                    '认证考试证书有效期'
                  ]
                };
                
                const response = responses[userMessage] || '感谢您的提问！我会尽力为您提供帮助。如果您有更具体的问题，请详细描述，我会给出更精准的回答。';
                addMessage(response, false);

                // 在回答下方追加进阶问题推荐
                const followups = followupsMap[userMessage];
                if (followups && followups.length) {
                    const container = document.createElement('div');
                    container.className = 'followups-container';
                    
                    followups.forEach(text => {
                        const btn = document.createElement('button');
                        btn.className = 'followup-btn';
                        btn.innerHTML = `<span>${text}</span><i class="fas fa-arrow-right followup-icon"></i>`;
                        btn.addEventListener('click', () => {
                            addMessage(text, true);
                            handleAIResponse(text);
                        });
                        container.appendChild(btn);
                    });

                    aiMessages.appendChild(container);
                    aiMessages.scrollTop = aiMessages.scrollHeight;
                }

                // 回答后收起上方卡片区域，给对话腾出空间
                setPanelsCollapsed(true);
            }, 1000);
        }

        // 发送按钮点击事件
        if (aiSend) {
            aiSend.addEventListener('click', function() {
                const message = aiInput.value.trim();
                if (message) {
                    addMessage(message, true);
                    // 发送后先收起（等回复出现时也会再次确保收起）
                    setPanelsCollapsed(true);
                    aiInput.value = '';
                    aiInput.style.height = 'auto';
                    handleAIResponse(message);
                }
            });
        }

        // 输入框回车发送
        if (aiInput) {
            aiInput.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    aiSend.click();
                }
            });
        }

        // 预设标签点击事件（底部快捷问题）
        const presetButtons = document.querySelectorAll('#ai-quick-questions button');
        presetButtons.forEach(button => {
            button.addEventListener('click', function() {
                const message = this.textContent.trim();
                addMessage(message, true);
                setPanelsCollapsed(true);
                handleAIResponse(message);
            });
        });

        // 能力场景 & 猜你想问卡片点击事件
        const panelButtons = document.querySelectorAll('.ability-item, .guess-question');
        panelButtons.forEach(button => {
            button.addEventListener('click', function() {
                const message = this.getAttribute('data-question') || this.textContent.trim();
                addMessage(message, true);
                setPanelsCollapsed(true);
                handleAIResponse(message);
            });
        });

        // 新对话按钮点击事件
        const newChatBtn = document.querySelector('.fa-plus').closest('button');
        if (newChatBtn) {
            newChatBtn.addEventListener('click', function() {
                // 清空当前消息与进阶推荐，但保留中部能力模块
                const toRemove = aiMessages.querySelectorAll('.message, .followups-container');
                toRemove.forEach(node => node.remove());

                // 重新插入欢迎消息到能力模块上方
                if (abilityPanels) {
                    const welcome = document.createElement('div');
                    welcome.className = 'message bot-message';

                    const avatar = document.createElement('div');
                    avatar.className = 'avatar-small bot-avatar';
                    avatar.innerHTML = '<i class="fas fa-robot"></i>';

                    const content = document.createElement('div');
                    content.className = 'message-content';
                    content.textContent = '您好！我是AI智能助手，展示认证流程，包括考试预约、获取与验证证书的入口，以及可能涉及的重认证规则。有什么可以帮助您的吗？';

                    welcome.appendChild(avatar);
                    welcome.appendChild(content);

                    aiMessages.insertBefore(welcome, abilityPanels);
                }

                // 新对话：重新展开
                setPanelsCollapsed(false);
            });
        }
    });
    </script>
</body>
</html>